var ga=Object.defineProperty;var ma=(r,t,e)=>t in r?ga(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var oe=(r,t,e)=>ma(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Ri(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var gt={},Er={};Er.byteLength=ba;Er.toByteArray=xa;Er.fromByteArray=Ba;var He=[],Me=[],wa=typeof Uint8Array<"u"?Uint8Array:Array,Jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var xn=0,ya=Jr.length;xn<ya;++xn)He[xn]=Jr[xn],Me[Jr.charCodeAt(xn)]=xn;Me[45]=62;Me[95]=63;function Hs(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function ba(r){var t=Hs(r),e=t[0],n=t[1];return(e+n)*3/4-n}function va(r,t,e){return(t+e)*3/4-e}function xa(r){var t,e=Hs(r),n=e[0],s=e[1],i=new wa(va(r,n,s)),o=0,c=s>0?n-4:n,h;for(h=0;h<c;h+=4)t=Me[r.charCodeAt(h)]<<18|Me[r.charCodeAt(h+1)]<<12|Me[r.charCodeAt(h+2)]<<6|Me[r.charCodeAt(h+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Me[r.charCodeAt(h)]<<2|Me[r.charCodeAt(h+1)]>>4,i[o++]=t&255),s===1&&(t=Me[r.charCodeAt(h)]<<10|Me[r.charCodeAt(h+1)]<<4|Me[r.charCodeAt(h+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Ea(r){return He[r>>18&63]+He[r>>12&63]+He[r>>6&63]+He[r&63]}function Sa(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(Ea(n));return s.join("")}function Ba(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,c=e-n;o<c;o+=i)s.push(Sa(r,o,o+i>c?c:o+i));return n===1?(t=r[e-1],s.push(He[t>>2]+He[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(He[t>>10]+He[t>>4&63]+He[t<<2&63]+"=")),s.join("")}var Li={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Li.read=function(r,t,e,n,s){var i,o,c=s*8-n-1,h=(1<<c)-1,E=h>>1,S=-7,A=e?s-1:0,N=e?-1:1,M=r[t+A];for(A+=N,i=M&(1<<-S)-1,M>>=-S,S+=c;S>0;i=i*256+r[t+A],A+=N,S-=8);for(o=i&(1<<-S)-1,i>>=-S,S+=n;S>0;o=o*256+r[t+A],A+=N,S-=8);if(i===0)i=1-E;else{if(i===h)return o?NaN:(M?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-E}return(M?-1:1)*o*Math.pow(2,i-n)};Li.write=function(r,t,e,n,s,i){var o,c,h,E=i*8-s-1,S=(1<<E)-1,A=S>>1,N=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=n?0:i-1,T=n?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=S):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),o+A>=1?t+=N/h:t+=N*Math.pow(2,1-A),t*h>=2&&(o++,h/=2),o+A>=S?(c=0,o=S):o+A>=1?(c=(t*h-1)*Math.pow(2,s),o=o+A):(c=t*Math.pow(2,A-1)*Math.pow(2,s),o=0));s>=8;r[e+M]=c&255,M+=T,c/=256,s-=8);for(o=o<<s|c,E+=s;E>0;r[e+M]=o&255,M+=T,o/=256,E-=8);r[e+M-T]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=Er,e=Li,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=J,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const g=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(g,u),g.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(g){if(g>s)throw new RangeError('The value "'+g+'" is invalid for option "size"');const u=new Uint8Array(g);return Object.setPrototypeOf(u,c.prototype),u}function c(g,u,l){if(typeof g=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(g)}return h(g,u,l)}c.poolSize=8192;function h(g,u,l){if(typeof g=="string")return N(g,u);if(ArrayBuffer.isView(g))return T(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Ae(g,ArrayBuffer)||g&&Ae(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(g,SharedArrayBuffer)||g&&Ae(g.buffer,SharedArrayBuffer)))return I(g,u,l);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=g.valueOf&&g.valueOf();if(v!=null&&v!==g)return c.from(v,u,l);const k=F(g);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return c.from(g[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}c.from=function(g,u,l){return h(g,u,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function E(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function S(g,u,l){return E(g),g<=0?o(g):u!==void 0?typeof l=="string"?o(g).fill(u,l):o(g).fill(u):o(g)}c.alloc=function(g,u,l){return S(g,u,l)};function A(g){return E(g),o(g<0?0:z(g)|0)}c.allocUnsafe=function(g){return A(g)},c.allocUnsafeSlow=function(g){return A(g)};function N(g,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=P(g,u)|0;let v=o(l);const k=v.write(g,u);return k!==l&&(v=v.slice(0,k)),v}function M(g){const u=g.length<0?0:z(g.length)|0,l=o(u);for(let v=0;v<u;v+=1)l[v]=g[v]&255;return l}function T(g){if(Ae(g,Uint8Array)){const u=new Uint8Array(g);return I(u.buffer,u.byteOffset,u.byteLength)}return M(g)}function I(g,u,l){if(u<0||g.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let v;return u===void 0&&l===void 0?v=new Uint8Array(g):l===void 0?v=new Uint8Array(g,u):v=new Uint8Array(g,u,l),Object.setPrototypeOf(v,c.prototype),v}function F(g){if(c.isBuffer(g)){const u=z(g.length)|0,l=o(u);return l.length===0||g.copy(l,0,0,u),l}if(g.length!==void 0)return typeof g.length!="number"||Tt(g.length)?o(0):M(g);if(g.type==="Buffer"&&Array.isArray(g.data))return M(g.data)}function z(g){if(g>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return g|0}function J(g){return+g!=g&&(g=0),c.alloc(+g)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,l){if(Ae(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),Ae(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(u)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let v=u.length,k=l.length;for(let R=0,O=Math.min(v,k);R<O;++R)if(u[R]!==l[R]){v=u[R],k=l[R];break}return v<k?-1:k<v?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let v;if(l===void 0)for(l=0,v=0;v<u.length;++v)l+=u[v].length;const k=c.allocUnsafe(l);let R=0;for(v=0;v<u.length;++v){let O=u[v];if(Ae(O,Uint8Array))R+O.length>k.length?(c.isBuffer(O)||(O=c.from(O)),O.copy(k,R)):Uint8Array.prototype.set.call(k,O,R);else if(c.isBuffer(O))O.copy(k,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=O.length}return k};function P(g,u){if(c.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Ae(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const l=g.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&l===0)return 0;let k=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return _t(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Mt(g).length;default:if(k)return v?-1:_t(g).length;u=(""+u).toLowerCase(),k=!0}}c.byteLength=P;function C(g,u,l){let v=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(g||(g="utf8");;)switch(g){case"hex":return y(this,u,l);case"utf8":case"utf-8":return a(this,u,l);case"ascii":return b(this,u,l);case"latin1":case"binary":return w(this,u,l);case"base64":return B(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,u,l);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),v=!0}}c.prototype._isBuffer=!0;function q(g,u,l){const v=g[u];g[u]=g[l],g[l]=v}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)q(this,l,l+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)q(this,l,l+3),q(this,l+1,l+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)q(this,l,l+7),q(this,l+1,l+6),q(this,l+2,l+5),q(this,l+3,l+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?a(this,0,u):C.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const l=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(u,l,v,k,R){if(Ae(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),v===void 0&&(v=u?u.length:0),k===void 0&&(k=0),R===void 0&&(R=this.length),l<0||v>u.length||k<0||R>this.length)throw new RangeError("out of range index");if(k>=R&&l>=v)return 0;if(k>=R)return-1;if(l>=v)return 1;if(l>>>=0,v>>>=0,k>>>=0,R>>>=0,this===u)return 0;let O=R-k,wt=v-l;const dt=Math.min(O,wt),lt=this.slice(k,R),Rt=u.slice(l,v);for(let ut=0;ut<dt;++ut)if(lt[ut]!==Rt[ut]){O=lt[ut],wt=Rt[ut];break}return O<wt?-1:wt<O?1:0};function W(g,u,l,v,k){if(g.length===0)return-1;if(typeof l=="string"?(v=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Tt(l)&&(l=k?0:g.length-1),l<0&&(l=g.length+l),l>=g.length){if(k)return-1;l=g.length-1}else if(l<0)if(k)l=0;else return-1;if(typeof u=="string"&&(u=c.from(u,v)),c.isBuffer(u))return u.length===0?-1:X(g,u,l,v,k);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(g,u,l):Uint8Array.prototype.lastIndexOf.call(g,u,l):X(g,[u],l,v,k);throw new TypeError("val must be string, number or Buffer")}function X(g,u,l,v,k){let R=1,O=g.length,wt=u.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(g.length<2||u.length<2)return-1;R=2,O/=2,wt/=2,l/=2}function dt(Rt,ut){return R===1?Rt[ut]:Rt.readUInt16BE(ut*R)}let lt;if(k){let Rt=-1;for(lt=l;lt<O;lt++)if(dt(g,lt)===dt(u,Rt===-1?0:lt-Rt)){if(Rt===-1&&(Rt=lt),lt-Rt+1===wt)return Rt*R}else Rt!==-1&&(lt-=lt-Rt),Rt=-1}else for(l+wt>O&&(l=O-wt),lt=l;lt>=0;lt--){let Rt=!0;for(let ut=0;ut<wt;ut++)if(dt(g,lt+ut)!==dt(u,ut)){Rt=!1;break}if(Rt)return lt}return-1}c.prototype.includes=function(u,l,v){return this.indexOf(u,l,v)!==-1},c.prototype.indexOf=function(u,l,v){return W(this,u,l,v,!0)},c.prototype.lastIndexOf=function(u,l,v){return W(this,u,l,v,!1)};function et(g,u,l,v){l=Number(l)||0;const k=g.length-l;v?(v=Number(v),v>k&&(v=k)):v=k;const R=u.length;v>R/2&&(v=R/2);let O;for(O=0;O<v;++O){const wt=parseInt(u.substr(O*2,2),16);if(Tt(wt))return O;g[l+O]=wt}return O}function ft(g,u,l,v){return At(_t(u,g.length-l),g,l,v)}function ht(g,u,l,v){return At(Lt(u),g,l,v)}function G(g,u,l,v){return At(Mt(u),g,l,v)}function it(g,u,l,v){return At(vn(u,g.length-l),g,l,v)}c.prototype.write=function(u,l,v,k){if(l===void 0)k="utf8",v=this.length,l=0;else if(v===void 0&&typeof l=="string")k=l,v=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(v)?(v=v>>>0,k===void 0&&(k="utf8")):(k=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const R=this.length-l;if((v===void 0||v>R)&&(v=R),u.length>0&&(v<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let O=!1;for(;;)switch(k){case"hex":return et(this,u,l,v);case"utf8":case"utf-8":return ft(this,u,l,v);case"ascii":case"latin1":case"binary":return ht(this,u,l,v);case"base64":return G(this,u,l,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,u,l,v);default:if(O)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),O=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(g,u,l){return u===0&&l===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(u,l))}function a(g,u,l){l=Math.min(g.length,l);const v=[];let k=u;for(;k<l;){const R=g[k];let O=null,wt=R>239?4:R>223?3:R>191?2:1;if(k+wt<=l){let dt,lt,Rt,ut;switch(wt){case 1:R<128&&(O=R);break;case 2:dt=g[k+1],(dt&192)===128&&(ut=(R&31)<<6|dt&63,ut>127&&(O=ut));break;case 3:dt=g[k+1],lt=g[k+2],(dt&192)===128&&(lt&192)===128&&(ut=(R&15)<<12|(dt&63)<<6|lt&63,ut>2047&&(ut<55296||ut>57343)&&(O=ut));break;case 4:dt=g[k+1],lt=g[k+2],Rt=g[k+3],(dt&192)===128&&(lt&192)===128&&(Rt&192)===128&&(ut=(R&15)<<18|(dt&63)<<12|(lt&63)<<6|Rt&63,ut>65535&&ut<1114112&&(O=ut))}}O===null?(O=65533,wt=1):O>65535&&(O-=65536,v.push(O>>>10&1023|55296),O=56320|O&1023),v.push(O),k+=wt}return p(v)}const d=4096;function p(g){const u=g.length;if(u<=d)return String.fromCharCode.apply(String,g);let l="",v=0;for(;v<u;)l+=String.fromCharCode.apply(String,g.slice(v,v+=d));return l}function b(g,u,l){let v="";l=Math.min(g.length,l);for(let k=u;k<l;++k)v+=String.fromCharCode(g[k]&127);return v}function w(g,u,l){let v="";l=Math.min(g.length,l);for(let k=u;k<l;++k)v+=String.fromCharCode(g[k]);return v}function y(g,u,l){const v=g.length;(!u||u<0)&&(u=0),(!l||l<0||l>v)&&(l=v);let k="";for(let R=u;R<l;++R)k+=Ot[g[R]];return k}function _(g,u,l){const v=g.slice(u,l);let k="";for(let R=0;R<v.length-1;R+=2)k+=String.fromCharCode(v[R]+v[R+1]*256);return k}c.prototype.slice=function(u,l){const v=this.length;u=~~u,l=l===void 0?v:~~l,u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),l<0?(l+=v,l<0&&(l=0)):l>v&&(l=v),l<u&&(l=u);const k=this.subarray(u,l);return Object.setPrototypeOf(k,c.prototype),k};function m(g,u,l){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+u>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,l,v){u=u>>>0,l=l>>>0,v||m(u,l,this.length);let k=this[u],R=1,O=0;for(;++O<l&&(R*=256);)k+=this[u+O]*R;return k},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,l,v){u=u>>>0,l=l>>>0,v||m(u,l,this.length);let k=this[u+--l],R=1;for(;l>0&&(R*=256);)k+=this[u+--l]*R;return k},c.prototype.readUint8=c.prototype.readUInt8=function(u,l){return u=u>>>0,l||m(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||m(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||m(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||m(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=Fe(function(u){u=u>>>0,kt(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&mt(u,this.length-8);const k=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,R=this[++u]+this[++u]*2**8+this[++u]*2**16+v*2**24;return BigInt(k)+(BigInt(R)<<BigInt(32))}),c.prototype.readBigUInt64BE=Fe(function(u){u=u>>>0,kt(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&mt(u,this.length-8);const k=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],R=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v;return(BigInt(k)<<BigInt(32))+BigInt(R)}),c.prototype.readIntLE=function(u,l,v){u=u>>>0,l=l>>>0,v||m(u,l,this.length);let k=this[u],R=1,O=0;for(;++O<l&&(R*=256);)k+=this[u+O]*R;return R*=128,k>=R&&(k-=Math.pow(2,8*l)),k},c.prototype.readIntBE=function(u,l,v){u=u>>>0,l=l>>>0,v||m(u,l,this.length);let k=l,R=1,O=this[u+--k];for(;k>0&&(R*=256);)O+=this[u+--k]*R;return R*=128,O>=R&&(O-=Math.pow(2,8*l)),O},c.prototype.readInt8=function(u,l){return u=u>>>0,l||m(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,l){u=u>>>0,l||m(u,2,this.length);const v=this[u]|this[u+1]<<8;return v&32768?v|4294901760:v},c.prototype.readInt16BE=function(u,l){u=u>>>0,l||m(u,2,this.length);const v=this[u+1]|this[u]<<8;return v&32768?v|4294901760:v},c.prototype.readInt32LE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,l){return u=u>>>0,l||m(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=Fe(function(u){u=u>>>0,kt(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&mt(u,this.length-8);const k=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(v<<24);return(BigInt(k)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=Fe(function(u){u=u>>>0,kt(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&mt(u,this.length-8);const k=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(k)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v)}),c.prototype.readFloatLE=function(u,l){return u=u>>>0,l||m(u,4,this.length),e.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,l){return u=u>>>0,l||m(u,4,this.length),e.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||m(u,8,this.length),e.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||m(u,8,this.length),e.read(this,u,!1,52,8)};function f(g,u,l,v,k,R){if(!c.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>k||u<R)throw new RangeError('"value" argument is out of bounds');if(l+v>g.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,l,v,k){if(u=+u,l=l>>>0,v=v>>>0,!k){const wt=Math.pow(2,8*v)-1;f(this,u,l,v,wt,0)}let R=1,O=0;for(this[l]=u&255;++O<v&&(R*=256);)this[l+O]=u/R&255;return l+v},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,l,v,k){if(u=+u,l=l>>>0,v=v>>>0,!k){const wt=Math.pow(2,8*v)-1;f(this,u,l,v,wt,0)}let R=v-1,O=1;for(this[l+R]=u&255;--R>=0&&(O*=256);)this[l+R]=u/O&255;return l+v},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,1,255,0),this[l]=u&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function x(g,u,l,v,k){pt(u,v,k,g,l,7);let R=Number(u&BigInt(4294967295));g[l++]=R,R=R>>8,g[l++]=R,R=R>>8,g[l++]=R,R=R>>8,g[l++]=R;let O=Number(u>>BigInt(32)&BigInt(4294967295));return g[l++]=O,O=O>>8,g[l++]=O,O=O>>8,g[l++]=O,O=O>>8,g[l++]=O,l}function $(g,u,l,v,k){pt(u,v,k,g,l,7);let R=Number(u&BigInt(4294967295));g[l+7]=R,R=R>>8,g[l+6]=R,R=R>>8,g[l+5]=R,R=R>>8,g[l+4]=R;let O=Number(u>>BigInt(32)&BigInt(4294967295));return g[l+3]=O,O=O>>8,g[l+2]=O,O=O>>8,g[l+1]=O,O=O>>8,g[l]=O,l+8}c.prototype.writeBigUInt64LE=Fe(function(u,l=0){return x(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Fe(function(u,l=0){return $(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,l,v,k){if(u=+u,l=l>>>0,!k){const dt=Math.pow(2,8*v-1);f(this,u,l,v,dt-1,-dt)}let R=0,O=1,wt=0;for(this[l]=u&255;++R<v&&(O*=256);)u<0&&wt===0&&this[l+R-1]!==0&&(wt=1),this[l+R]=(u/O>>0)-wt&255;return l+v},c.prototype.writeIntBE=function(u,l,v,k){if(u=+u,l=l>>>0,!k){const dt=Math.pow(2,8*v-1);f(this,u,l,v,dt-1,-dt)}let R=v-1,O=1,wt=0;for(this[l+R]=u&255;--R>=0&&(O*=256);)u<0&&wt===0&&this[l+R+1]!==0&&(wt=1),this[l+R]=(u/O>>0)-wt&255;return l+v},c.prototype.writeInt8=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},c.prototype.writeInt16LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeInt16BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeInt32LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},c.prototype.writeInt32BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},c.prototype.writeBigInt64LE=Fe(function(u,l=0){return x(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Fe(function(u,l=0){return $(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function H(g,u,l,v,k,R){if(l+v>g.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function V(g,u,l,v,k){return u=+u,l=l>>>0,k||H(g,u,l,4),e.write(g,u,l,v,23,4),l+4}c.prototype.writeFloatLE=function(u,l,v){return V(this,u,l,!0,v)},c.prototype.writeFloatBE=function(u,l,v){return V(this,u,l,!1,v)};function ot(g,u,l,v,k){return u=+u,l=l>>>0,k||H(g,u,l,8),e.write(g,u,l,v,52,8),l+8}c.prototype.writeDoubleLE=function(u,l,v){return ot(this,u,l,!0,v)},c.prototype.writeDoubleBE=function(u,l,v){return ot(this,u,l,!1,v)},c.prototype.copy=function(u,l,v,k){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),!k&&k!==0&&(k=this.length),l>=u.length&&(l=u.length),l||(l=0),k>0&&k<v&&(k=v),k===v||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),u.length-l<k-v&&(k=u.length-l+v);const R=k-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,v,k):Uint8Array.prototype.set.call(u,this.subarray(v,k),l),R},c.prototype.fill=function(u,l,v,k){if(typeof u=="string"){if(typeof l=="string"?(k=l,l=0,v=this.length):typeof v=="string"&&(k=v,v=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!c.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(u.length===1){const O=u.charCodeAt(0);(k==="utf8"&&O<128||k==="latin1")&&(u=O)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<v)throw new RangeError("Out of range index");if(v<=l)return this;l=l>>>0,v=v===void 0?this.length:v>>>0,u||(u=0);let R;if(typeof u=="number")for(R=l;R<v;++R)this[R]=u;else{const O=c.isBuffer(u)?u:c.from(u,k),wt=O.length;if(wt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(R=0;R<v-l;++R)this[R+l]=O[R%wt]}return this};const nt={};function at(g,u,l){nt[g]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}at("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),at("ERR_INVALID_ARG_TYPE",function(g,u){return`The "${g}" argument must be of type number. Received type ${typeof u}`},TypeError),at("ERR_OUT_OF_RANGE",function(g,u,l){let v=`The value of "${g}" is out of range.`,k=l;return Number.isInteger(l)&&Math.abs(l)>2**32?k=Ut(String(l)):typeof l=="bigint"&&(k=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(k=Ut(k)),k+="n"),v+=` It must be ${u}. Received ${k}`,v},RangeError);function Ut(g){let u="",l=g.length;const v=g[0]==="-"?1:0;for(;l>=v+4;l-=3)u=`_${g.slice(l-3,l)}${u}`;return`${g.slice(0,l)}${u}`}function bt(g,u,l){kt(u,"offset"),(g[u]===void 0||g[u+l]===void 0)&&mt(u,g.length-(l+1))}function pt(g,u,l,v,k,R){if(g>l||g<u){const O=typeof u=="bigint"?"n":"";let wt;throw u===0||u===BigInt(0)?wt=`>= 0${O} and < 2${O} ** ${(R+1)*8}${O}`:wt=`>= -(2${O} ** ${(R+1)*8-1}${O}) and < 2 ** ${(R+1)*8-1}${O}`,new nt.ERR_OUT_OF_RANGE("value",wt,g)}bt(v,k,R)}function kt(g,u){if(typeof g!="number")throw new nt.ERR_INVALID_ARG_TYPE(u,"number",g)}function mt(g,u,l){throw Math.floor(g)!==g?(kt(g,l),new nt.ERR_OUT_OF_RANGE("offset","an integer",g)):u<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,g)}const xt=/[^+/0-9A-Za-z-_]/g;function Se(g){if(g=g.split("=")[0],g=g.trim().replace(xt,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function _t(g,u){u=u||1/0;let l;const v=g.length;let k=null;const R=[];for(let O=0;O<v;++O){if(l=g.charCodeAt(O),l>55295&&l<57344){if(!k){if(l>56319){(u-=3)>-1&&R.push(239,191,189);continue}else if(O+1===v){(u-=3)>-1&&R.push(239,191,189);continue}k=l;continue}if(l<56320){(u-=3)>-1&&R.push(239,191,189),k=l;continue}l=(k-55296<<10|l-56320)+65536}else k&&(u-=3)>-1&&R.push(239,191,189);if(k=null,l<128){if((u-=1)<0)break;R.push(l)}else if(l<2048){if((u-=2)<0)break;R.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;R.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;R.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return R}function Lt(g){const u=[];for(let l=0;l<g.length;++l)u.push(g.charCodeAt(l)&255);return u}function vn(g,u){let l,v,k;const R=[];for(let O=0;O<g.length&&!((u-=2)<0);++O)l=g.charCodeAt(O),v=l>>8,k=l%256,R.push(k),R.push(v);return R}function Mt(g){return t.toByteArray(Se(g))}function At(g,u,l,v){let k;for(k=0;k<v&&!(k+l>=u.length||k>=g.length);++k)u[k+l]=g[k];return k}function Ae(g,u){return g instanceof u||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===u.name}function Tt(g){return g!==g}const Ot=function(){const g="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const v=l*16;for(let k=0;k<16;++k)u[v+k]=g[l]+g[k]}return u}();function Fe(g){return typeof BigInt>"u"?Pt:g}function Pt(){throw new Error("BigInt not supported")}})(gt);const En=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _a(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function bi(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Vn(r,...t){if(!_a(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Aa(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");bi(r.outputLen),bi(r.blockLen)}function cr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ka(r,t){Vn(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Ln(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function Qr(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function De(r,t){return r<<32-t|r>>>t}function Ia(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Ti(r){return typeof r=="string"&&(r=Ia(r)),Vn(r),r}function Ma(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Vn(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class Ks{}function $s(r){const t=n=>r().update(Ti(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Ws(r=32){if(En&&typeof En.getRandomValues=="function")return En.getRandomValues(new Uint8Array(r));if(En&&typeof En.randomBytes=="function")return Uint8Array.from(En.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Ra(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),h=n?4:0,E=n?0:4;r.setUint32(t+h,o,n),r.setUint32(t+E,c,n)}function La(r,t,e){return r&t^~r&e}function Ta(r,t,e){return r&t^r&e^t&e}class Vs extends Ks{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Qr(this.buffer)}update(t){cr(this),t=Ti(t),Vn(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const h=Qr(t);for(;s<=i-o;o+=s)this.process(h,o);continue}n.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){cr(this),ka(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Ln(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let A=o;A<s;A++)e[A]=0;Ra(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=Qr(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const E=h/4,S=this.get();if(E>S.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<E;A++)c.setUint32(4*A,S[A],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Qe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),tr=BigInt(2**32-1),ls=BigInt(32);function Ca(r,t=!1){return t?{h:Number(r&tr),l:Number(r>>ls&tr)}:{h:Number(r>>ls&tr)|0,l:Number(r&tr)|0}}function Ua(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=Ca(r[i],t);[n[i],s[i]]=[o,c]}return[n,s]}const hs=(r,t,e)=>r>>>e,ds=(r,t,e)=>r<<32-e|t>>>e,Sn=(r,t,e)=>r>>>e|t<<32-e,Bn=(r,t,e)=>r<<32-e|t>>>e,er=(r,t,e)=>r<<64-e|t>>>e-32,nr=(r,t,e)=>r>>>e-32|t<<64-e;function je(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Fa=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Na=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Oa=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Pa=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,qa=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Da=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,za=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tn=new Uint32Array(64);class Ha extends Vs{constructor(t=32){super(64,t,8,!1),this.A=Qe[0]|0,this.B=Qe[1]|0,this.C=Qe[2]|0,this.D=Qe[3]|0,this.E=Qe[4]|0,this.F=Qe[5]|0,this.G=Qe[6]|0,this.H=Qe[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:c,H:h}=this;return[t,e,n,s,i,o,c,h]}set(t,e,n,s,i,o,c,h){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=h|0}process(t,e){for(let A=0;A<16;A++,e+=4)tn[A]=t.getUint32(e,!1);for(let A=16;A<64;A++){const N=tn[A-15],M=tn[A-2],T=De(N,7)^De(N,18)^N>>>3,I=De(M,17)^De(M,19)^M>>>10;tn[A]=I+tn[A-7]+T+tn[A-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:h,G:E,H:S}=this;for(let A=0;A<64;A++){const N=De(c,6)^De(c,11)^De(c,25),M=S+N+La(c,h,E)+za[A]+tn[A]|0,I=(De(n,2)^De(n,13)^De(n,22))+Ta(n,s,i)|0;S=E,E=h,h=c,c=o+M|0,o=i,i=s,s=n,n=M+I|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,h=h+this.F|0,E=E+this.G|0,S=S+this.H|0,this.set(n,s,i,o,c,h,E,S)}roundClean(){Ln(tn)}destroy(){this.set(0,0,0,0,0,0,0,0),Ln(this.buffer)}}const js=Ua(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Ka=js[0],$a=js[1],en=new Uint32Array(80),nn=new Uint32Array(80);class Wa extends Vs{constructor(t=64){super(128,t,16,!1),this.Ah=pe[0]|0,this.Al=pe[1]|0,this.Bh=pe[2]|0,this.Bl=pe[3]|0,this.Ch=pe[4]|0,this.Cl=pe[5]|0,this.Dh=pe[6]|0,this.Dl=pe[7]|0,this.Eh=pe[8]|0,this.El=pe[9]|0,this.Fh=pe[10]|0,this.Fl=pe[11]|0,this.Gh=pe[12]|0,this.Gl=pe[13]|0,this.Hh=pe[14]|0,this.Hl=pe[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:c,Dl:h,Eh:E,El:S,Fh:A,Fl:N,Gh:M,Gl:T,Hh:I,Hl:F}=this;return[t,e,n,s,i,o,c,h,E,S,A,N,M,T,I,F]}set(t,e,n,s,i,o,c,h,E,S,A,N,M,T,I,F){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=h|0,this.Eh=E|0,this.El=S|0,this.Fh=A|0,this.Fl=N|0,this.Gh=M|0,this.Gl=T|0,this.Hh=I|0,this.Hl=F|0}process(t,e){for(let P=0;P<16;P++,e+=4)en[P]=t.getUint32(e),nn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const C=en[P-15]|0,q=nn[P-15]|0,W=Sn(C,q,1)^Sn(C,q,8)^hs(C,q,7),X=Bn(C,q,1)^Bn(C,q,8)^ds(C,q,7),et=en[P-2]|0,ft=nn[P-2]|0,ht=Sn(et,ft,19)^er(et,ft,61)^hs(et,ft,6),G=Bn(et,ft,19)^nr(et,ft,61)^ds(et,ft,6),it=Oa(X,G,nn[P-7],nn[P-16]),B=Pa(it,W,ht,en[P-7],en[P-16]);en[P]=B|0,nn[P]=it|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:c,Cl:h,Dh:E,Dl:S,Eh:A,El:N,Fh:M,Fl:T,Gh:I,Gl:F,Hh:z,Hl:J}=this;for(let P=0;P<80;P++){const C=Sn(A,N,14)^Sn(A,N,18)^er(A,N,41),q=Bn(A,N,14)^Bn(A,N,18)^nr(A,N,41),W=A&M^~A&I,X=N&T^~N&F,et=qa(J,q,X,$a[P],nn[P]),ft=Da(et,z,C,W,Ka[P],en[P]),ht=et|0,G=Sn(n,s,28)^er(n,s,34)^er(n,s,39),it=Bn(n,s,28)^nr(n,s,34)^nr(n,s,39),B=n&i^n&c^i&c,a=s&o^s&h^o&h;z=I|0,J=F|0,I=M|0,F=T|0,M=A|0,T=N|0,{h:A,l:N}=je(E|0,S|0,ft|0,ht|0),E=c|0,S=h|0,c=i|0,h=o|0,i=n|0,o=s|0;const d=Fa(ht,it,a);n=Na(d,ft,G,B),s=d|0}({h:n,l:s}=je(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=je(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:h}=je(this.Ch|0,this.Cl|0,c|0,h|0),{h:E,l:S}=je(this.Dh|0,this.Dl|0,E|0,S|0),{h:A,l:N}=je(this.Eh|0,this.El|0,A|0,N|0),{h:M,l:T}=je(this.Fh|0,this.Fl|0,M|0,T|0),{h:I,l:F}=je(this.Gh|0,this.Gl|0,I|0,F|0),{h:z,l:J}=je(this.Hh|0,this.Hl|0,z|0,J|0),this.set(n,s,i,o,c,h,E,S,A,N,M,T,I,F,z,J)}roundClean(){Ln(en,nn)}destroy(){Ln(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Gs=$s(()=>new Ha),Va=$s(()=>new Wa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ci=BigInt(0),vi=BigInt(1);function jn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ui(r){if(!jn(r))throw new Error("Uint8Array expected")}function cn(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}function rr(r){const t=r.toString(16);return t.length&1?"0"+t:t}function Zs(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Ci:BigInt("0x"+r)}const Ys=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ja=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Tn(r){if(Ui(r),Ys)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=ja[r[e]];return t}const Ge={_0:48,_9:57,A:65,F:70,a:97,f:102};function ps(r){if(r>=Ge._0&&r<=Ge._9)return r-Ge._0;if(r>=Ge.A&&r<=Ge.F)return r-(Ge.A-10);if(r>=Ge.a&&r<=Ge.f)return r-(Ge.a-10)}function ur(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Ys)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=ps(r.charCodeAt(i)),c=ps(r.charCodeAt(i+1));if(o===void 0||c===void 0){const h=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+i)}n[s]=o*16+c}return n}function pn(r){return Zs(Tn(r))}function Kn(r){return Ui(r),Zs(Tn(Uint8Array.from(r).reverse()))}function Gn(r,t){return ur(r.toString(16).padStart(t*2,"0"))}function fr(r,t){return Gn(r,t).reverse()}function Ht(r,t,e){let n;if(typeof t=="string")try{n=ur(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(jn(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function Cn(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Ui(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}const ti=r=>typeof r=="bigint"&&Ci<=r;function Fi(r,t,e){return ti(r)&&ti(t)&&ti(e)&&t<=r&&r<e}function Ne(r,t,e,n){if(!Fi(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Ga(r){let t;for(t=0;r>Ci;r>>=vi,t+=1);return t}const Sr=r=>(vi<<BigInt(r))-vi,ei=r=>new Uint8Array(r),gs=r=>Uint8Array.from(r);function Za(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=ei(r),s=ei(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},c=(...A)=>e(s,n,...A),h=(A=ei(0))=>{s=c(gs([0]),A),n=c(),A.length!==0&&(s=c(gs([1]),A),n=c())},E=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const N=[];for(;A<t;){n=c();const M=n.slice();N.push(M),A+=n.length}return Cn(...N)};return(A,N)=>{o(),h(A);let M;for(;!(M=N(E()));)h();return o(),M}}const Ya={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||jn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Zn(r,t,e={}){const n=(s,i,o)=>{const c=Ya[i];if(typeof c!="function")throw new Error("invalid validator function");const h=r[s];if(!(o&&h===void 0)&&!c(h,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+h)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}function lr(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _e=BigInt(0),de=BigInt(1),dn=BigInt(2),Xa=BigInt(3),Xs=BigInt(4),Js=BigInt(5),Qs=BigInt(8);function Ct(r,t){const e=r%t;return e>=_e?e:t+e}function qt(r,t,e){let n=r;for(;t-- >_e;)n*=n,n%=e;return n}function xi(r,t){if(r===_e)throw new Error("invert: expected non-zero number");if(t<=_e)throw new Error("invert: expected positive modulus, got "+t);let e=Ct(r,t),n=t,s=_e,i=de;for(;e!==_e;){const c=n/e,h=n%e,E=s-i*c;n=e,e=h,s=i,i=E}if(n!==de)throw new Error("invert: does not exist");return Ct(s,t)}function to(r,t){const e=(r.ORDER+de)/Xs,n=r.pow(t,e);if(!r.eql(r.sqr(n),t))throw new Error("Cannot find square root");return n}function Ja(r,t){const e=(r.ORDER-Js)/Qs,n=r.mul(t,dn),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,dn),s),c=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(c),t))throw new Error("Cannot find square root");return c}function Qa(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let t=r-de,e=0;for(;t%dn===_e;)t/=dn,e++;let n=dn;const s=Yn(r);for(;ms(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return to;let i=s.pow(n,t);const o=(t+de)/dn;return function(h,E){if(h.is0(E))return E;if(ms(h,E)!==1)throw new Error("Cannot find square root");let S=e,A=h.mul(h.ONE,i),N=h.pow(E,t),M=h.pow(E,o);for(;!h.eql(N,h.ONE);){if(h.is0(N))return h.ZERO;let T=1,I=h.sqr(N);for(;!h.eql(I,h.ONE);)if(T++,I=h.sqr(I),T===S)throw new Error("Cannot find square root");const F=de<<BigInt(S-T-1),z=h.pow(A,F);S=T,A=h.sqr(z),N=h.mul(N,A),M=h.mul(M,z)}return M}}function tc(r){return r%Xs===Xa?to:r%Qs===Js?Ja:Qa(r)}const ec=(r,t)=>(Ct(r,t)&de)===de,nc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rc(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=nc.reduce((n,s)=>(n[s]="function",n),t);return Zn(r,e)}function ic(r,t,e){if(e<_e)throw new Error("invalid exponent, negatives unsupported");if(e===_e)return r.ONE;if(e===de)return t;let n=r.ONE,s=t;for(;e>_e;)e&de&&(n=r.mul(n,s)),s=r.sqr(s),e>>=de;return n}function Ni(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,c,h)=>r.is0(c)?o:(n[h]=o,r.mul(o,c)),r.ONE),i=r.inv(s);return t.reduceRight((o,c,h)=>r.is0(c)?o:(n[h]=r.mul(o,n[h]),r.mul(o,c)),i),n}function ms(r,t){const e=(r.ORDER-de)/dn,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function eo(r,t){t!==void 0&&bi(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Yn(r,t,e=!1,n={}){if(r<=_e)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:i}=eo(r,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:r,isLE:e,BITS:s,BYTES:i,MASK:Sr(s),ZERO:_e,ONE:de,create:h=>Ct(h,r),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return _e<=h&&h<r},is0:h=>h===_e,isOdd:h=>(h&de)===de,neg:h=>Ct(-h,r),eql:(h,E)=>h===E,sqr:h=>Ct(h*h,r),add:(h,E)=>Ct(h+E,r),sub:(h,E)=>Ct(h-E,r),mul:(h,E)=>Ct(h*E,r),pow:(h,E)=>ic(c,h,E),div:(h,E)=>Ct(h*xi(E,r),r),sqrN:h=>h*h,addN:(h,E)=>h+E,subN:(h,E)=>h-E,mulN:(h,E)=>h*E,inv:h=>xi(h,r),sqrt:n.sqrt||(h=>(o||(o=tc(r)),o(c,h))),toBytes:h=>e?fr(h,i):Gn(h,i),fromBytes:h=>{if(h.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+h.length);return e?Kn(h):pn(h)},invertBatch:h=>Ni(c,h),cmov:(h,E,S)=>S?E:h});return Object.freeze(c)}function no(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function ro(r){const t=no(r);return t+Math.ceil(t/2)}function sc(r,t,e=!1){const n=r.length,s=no(t),i=ro(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?Kn(r):pn(r),c=Ct(o,t-de)+de;return e?fr(c,s):Gn(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ws=BigInt(0),Ei=BigInt(1);function ni(r,t){const e=t.negate();return r?e:t}function io(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function ri(r,t){io(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=Sr(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function ys(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(r&s),h=r>>o;c>n&&(c-=i,h+=Ei);const E=t*n,S=E+Math.abs(c)-1,A=c===0,N=c<0,M=t%2!==0;return{nextN:h,offset:S,isZero:A,isNeg:N,isNegF:M,offsetF:E}}function oc(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function ac(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const ii=new WeakMap,so=new WeakMap;function si(r){return so.get(r)||1}function oo(r,t){return{constTimeNegate:ni,hasPrecomputes(e){return si(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>ws;)n&Ei&&(s=s.add(i)),i=i.double(),n>>=Ei;return s},precomputeWindow(e,n){const{windows:s,windowSize:i}=ri(n,t),o=[];let c=e,h=c;for(let E=0;E<s;E++){h=c,o.push(h);for(let S=1;S<i;S++)h=h.add(c),o.push(h);c=h.double()}return o},wNAF(e,n,s){let i=r.ZERO,o=r.BASE;const c=ri(e,t);for(let h=0;h<c.windows;h++){const{nextN:E,offset:S,isZero:A,isNeg:N,isNegF:M,offsetF:T}=ys(s,h,c);s=E,A?o=o.add(ni(M,n[T])):i=i.add(ni(N,n[S]))}return{p:i,f:o}},wNAFUnsafe(e,n,s,i=r.ZERO){const o=ri(e,t);for(let c=0;c<o.windows&&s!==ws;c++){const{nextN:h,offset:E,isZero:S,isNeg:A}=ys(s,c,o);if(s=h,!S){const N=n[E];i=i.add(A?N.negate():N)}}return i},getPrecomputes(e,n,s){let i=ii.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&ii.set(n,s(i))),i},wNAFCached(e,n,s){const i=si(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){const o=si(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){io(n,t),so.set(e,n),ii.delete(e)}}}function ao(r,t,e,n){oc(e,r),ac(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,c=Ga(BigInt(s));let h=1;c>12?h=c-3:c>4?h=c-2:c>0&&(h=2);const E=Sr(h),S=new Array(Number(E)+1).fill(o),A=Math.floor((t.BITS-1)/h)*h;let N=o;for(let M=A;M>=0;M-=h){S.fill(o);for(let I=0;I<i;I++){const F=n[I],z=Number(F>>BigInt(M)&E);S[z]=S[z].add(e[I])}let T=o;for(let I=S.length-1,F=o;I>0;I--)F=F.add(S[I]),T=T.add(F);if(N=N.add(T),M!==0)for(let I=0;I<h;I++)N=N.double()}return N}function Oi(r){return rc(r.Fp),Zn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...eo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ze=BigInt(0),be=BigInt(1),bs=BigInt(2),cc=BigInt(8),uc={zip215:!0};function fc(r){const t=Oi(r);return Zn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function lc(r){const t=fc(r),{Fp:e,n,prehash:s,hash:i,randomBytes:o,nByteLength:c,h}=t,E=bs<<BigInt(c*8)-be,S=e.create,A=Yn(t.n,t.nBitLength);function N(w,y){const _=e.sqr(w),m=e.sqr(y),f=e.add(e.mul(t.a,_),m),x=e.add(e.ONE,e.mul(t.d,e.mul(_,m)));return e.eql(f,x)}if(!N(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const M=t.uvRatio||((w,y)=>{try{return{isValid:!0,value:e.sqrt(w*e.inv(y))}}catch{return{isValid:!1,value:ze}}}),T=t.adjustScalarBytes||(w=>w),I=t.domain||((w,y,_)=>{if(cn("phflag",_),y.length||_)throw new Error("Contexts/pre-hash are not supported");return w});function F(w,y,_=!1){const m=_?be:ze;Ne("coordinate "+w,y,m,E)}function z(w){if(!(w instanceof C))throw new Error("ExtendedPoint expected")}const J=lr((w,y)=>{const{ex:_,ey:m,ez:f}=w,x=w.is0();y==null&&(y=x?cc:e.inv(f));const $=S(_*y),H=S(m*y),V=S(f*y);if(x)return{x:ze,y:be};if(V!==be)throw new Error("invZ was invalid");return{x:$,y:H}}),P=lr(w=>{const{a:y,d:_}=t;if(w.is0())throw new Error("bad point: ZERO");const{ex:m,ey:f,ez:x,et:$}=w,H=S(m*m),V=S(f*f),ot=S(x*x),nt=S(ot*ot),at=S(H*y),Ut=S(ot*S(at+V)),bt=S(nt+S(_*S(H*V)));if(Ut!==bt)throw new Error("bad point: equation left != right (1)");const pt=S(m*f),kt=S(x*$);if(pt!==kt)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(y,_,m,f){F("x",y),F("y",_),F("z",m,!0),F("t",f),this.ex=y,this.ey=_,this.ez=m,this.et=f,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(y){if(y instanceof C)throw new Error("extended point not allowed");const{x:_,y:m}=y||{};return F("x",_),F("y",m),new C(_,m,be,S(_*m))}static normalizeZ(y){const _=Ni(e,y.map(m=>m.ez));return y.map((m,f)=>m.toAffine(_[f])).map(C.fromAffine)}static msm(y,_){return ao(C,A,y,_)}_setWindowSize(y){X.setWindowSize(this,y)}assertValidity(){P(this)}equals(y){z(y);const{ex:_,ey:m,ez:f}=this,{ex:x,ey:$,ez:H}=y,V=S(_*H),ot=S(x*f),nt=S(m*H),at=S($*f);return V===ot&&nt===at}is0(){return this.equals(C.ZERO)}negate(){return new C(S(-this.ex),this.ey,this.ez,S(-this.et))}double(){const{a:y}=t,{ex:_,ey:m,ez:f}=this,x=S(_*_),$=S(m*m),H=S(bs*S(f*f)),V=S(y*x),ot=_+m,nt=S(S(ot*ot)-x-$),at=V+$,Ut=at-H,bt=V-$,pt=S(nt*Ut),kt=S(at*bt),mt=S(nt*bt),xt=S(Ut*at);return new C(pt,kt,xt,mt)}add(y){z(y);const{a:_,d:m}=t,{ex:f,ey:x,ez:$,et:H}=this,{ex:V,ey:ot,ez:nt,et:at}=y,Ut=S(f*V),bt=S(x*ot),pt=S(H*m*at),kt=S($*nt),mt=S((f+x)*(V+ot)-Ut-bt),xt=kt-pt,Se=kt+pt,_t=S(bt-_*Ut),Lt=S(mt*xt),vn=S(Se*_t),Mt=S(mt*_t),At=S(xt*Se);return new C(Lt,vn,At,Mt)}subtract(y){return this.add(y.negate())}wNAF(y){return X.wNAFCached(this,y,C.normalizeZ)}multiply(y){const _=y;Ne("scalar",_,be,n);const{p:m,f}=this.wNAF(_);return C.normalizeZ([m,f])[0]}multiplyUnsafe(y,_=C.ZERO){const m=y;return Ne("scalar",m,ze,n),m===ze?W:this.is0()||m===be?this:X.wNAFCachedUnsafe(this,m,C.normalizeZ,_)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return X.unsafeLadder(this,n).is0()}toAffine(y){return J(this,y)}clearCofactor(){const{h:y}=t;return y===be?this:this.multiplyUnsafe(y)}static fromHex(y,_=!1){const{d:m,a:f}=t,x=e.BYTES;y=Ht("pointHex",y,x),cn("zip215",_);const $=y.slice(),H=y[x-1];$[x-1]=H&-129;const V=Kn($),ot=_?E:e.ORDER;Ne("pointHex.y",V,ze,ot);const nt=S(V*V),at=S(nt-be),Ut=S(m*nt-f);let{isValid:bt,value:pt}=M(at,Ut);if(!bt)throw new Error("Point.fromHex: invalid y coordinate");const kt=(pt&be)===be,mt=(H&128)!==0;if(!_&&pt===ze&&mt)throw new Error("Point.fromHex: x=0 and x_0=1");return mt!==kt&&(pt=S(-pt)),C.fromAffine({x:pt,y:V})}static fromPrivateKey(y){const{scalar:_}=ht(y);return q.multiply(_)}toRawBytes(){const{x:y,y:_}=this.toAffine(),m=fr(_,e.BYTES);return m[m.length-1]|=y&be?128:0,m}toHex(){return Tn(this.toRawBytes())}}C.BASE=new C(t.Gx,t.Gy,be,S(t.Gx*t.Gy)),C.ZERO=new C(ze,be,be,ze);const{BASE:q,ZERO:W}=C,X=oo(C,c*8);function et(w){return Ct(w,n)}function ft(w){return et(Kn(w))}function ht(w){const y=e.BYTES;w=Ht("private key",w,y);const _=Ht("hashed private key",i(w),2*y),m=T(_.slice(0,y)),f=_.slice(y,2*y),x=ft(m);return{head:m,prefix:f,scalar:x}}function G(w){const{head:y,prefix:_,scalar:m}=ht(w),f=q.multiply(m),x=f.toRawBytes();return{head:y,prefix:_,scalar:m,point:f,pointBytes:x}}function it(w){return G(w).pointBytes}function B(w=Uint8Array.of(),...y){const _=Cn(...y);return ft(i(I(_,Ht("context",w),!!s)))}function a(w,y,_={}){w=Ht("message",w),s&&(w=s(w));const{prefix:m,scalar:f,pointBytes:x}=G(y),$=B(_.context,m,w),H=q.multiply($).toRawBytes(),V=B(_.context,H,x,w),ot=et($+V*f);Ne("signature.s",ot,ze,n);const nt=Cn(H,fr(ot,e.BYTES));return Ht("result",nt,e.BYTES*2)}const d=uc;function p(w,y,_,m=d){const{context:f,zip215:x}=m,$=e.BYTES;w=Ht("signature",w,2*$),y=Ht("message",y),_=Ht("publicKey",_,$),x!==void 0&&cn("zip215",x),s&&(y=s(y));const H=Kn(w.slice($,2*$));let V,ot,nt;try{V=C.fromHex(_,x),ot=C.fromHex(w.slice(0,$),x),nt=q.multiplyUnsafe(H)}catch{return!1}if(!x&&V.isSmallOrder())return!1;const at=B(f,ot.toRawBytes(),V.toRawBytes(),y);return ot.add(V.multiplyUnsafe(at)).subtract(nt).clearCofactor().equals(C.ZERO)}return q._setWindowSize(8),{CURVE:t,getPublicKey:it,sign:a,verify:p,ExtendedPoint:C,utils:{getExtendedPublicKey:G,randomPrivateKey:()=>o(e.BYTES),precompute(w=8,y=C.BASE){return y._setWindowSize(w),y.multiply(BigInt(3)),y}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),vs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const hc=BigInt(1),xs=BigInt(2);BigInt(3);const dc=BigInt(5),pc=BigInt(8);function gc(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=Pi,c=r*r%i*r%i,h=qt(c,xs,i)*c%i,E=qt(h,hc,i)*r%i,S=qt(E,dc,i)*E%i,A=qt(S,t,i)*S%i,N=qt(A,e,i)*A%i,M=qt(N,n,i)*N%i,T=qt(M,s,i)*M%i,I=qt(T,s,i)*M%i,F=qt(I,t,i)*S%i;return{pow_p_5_8:qt(F,xs,i)*r%i,b2:c}}function mc(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function wc(r,t){const e=Pi,n=Ct(t*t*t,e),s=Ct(n*n*t,e),i=gc(r*s).pow_p_5_8;let o=Ct(r*n*i,e);const c=Ct(t*o*o,e),h=o,E=Ct(o*vs,e),S=c===r,A=c===Ct(-r,e),N=c===Ct(-r*vs,e);return S&&(o=h),(A||N)&&(o=E),ec(o,e)&&(o=Ct(-o,e)),{isValid:S||A,value:o}}const Es=Yn(Pi,void 0,!0),yc={a:Es.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Es,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:pc,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Va,randomBytes:Ws,adjustScalarBytes:mc,uvRatio:wc},qi=lc(yc);var Di={exports:{}};const bc={},vc=Object.freeze(Object.defineProperty({__proto__:null,default:bc},Symbol.toStringTag,{value:"Module"})),xc=Ri(vc);Di.exports;(function(r){(function(t,e){function n(B,a){if(!B)throw new Error(a||"Assertion failed")}function s(B,a){B.super_=a;var d=function(){};d.prototype=a.prototype,B.prototype=new d,B.prototype.constructor=B}function i(B,a,d){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((a==="le"||a==="be")&&(d=a,a=10),this._init(B||0,a||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=xc.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,d){return a.cmp(d)>0?a:d},i.min=function(a,d){return a.cmp(d)<0?a:d},i.prototype._init=function(a,d,p){if(typeof a=="number")return this._initNumber(a,d,p);if(typeof a=="object")return this._initArray(a,d,p);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),a=a.toString().replace(/\s+/g,"");var b=0;a[0]==="-"&&(b++,this.negative=1),b<a.length&&(d===16?this._parseHex(a,b,p):(this._parseBase(a,d,b),p==="le"&&this._initArray(this.toArray(),d,p)))},i.prototype._initNumber=function(a,d,p){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),d,p)},i.prototype._initArray=function(a,d,p){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var w,y,_=0;if(p==="be")for(b=a.length-1,w=0;b>=0;b-=3)y=a[b]|a[b-1]<<8|a[b-2]<<16,this.words[w]|=y<<_&67108863,this.words[w+1]=y>>>26-_&67108863,_+=24,_>=26&&(_-=26,w++);else if(p==="le")for(b=0,w=0;b<a.length;b+=3)y=a[b]|a[b+1]<<8|a[b+2]<<16,this.words[w]|=y<<_&67108863,this.words[w+1]=y>>>26-_&67108863,_+=24,_>=26&&(_-=26,w++);return this._strip()};function c(B,a){var d=B.charCodeAt(a);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+B)}function h(B,a,d){var p=c(B,d);return d-1>=a&&(p|=c(B,d-1)<<4),p}i.prototype._parseHex=function(a,d,p){this.length=Math.ceil((a.length-d)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var w=0,y=0,_;if(p==="be")for(b=a.length-1;b>=d;b-=2)_=h(a,d,b)<<w,this.words[y]|=_&67108863,w>=18?(w-=18,y+=1,this.words[y]|=_>>>26):w+=8;else{var m=a.length-d;for(b=m%2===0?d+1:d;b<a.length;b+=2)_=h(a,d,b)<<w,this.words[y]|=_&67108863,w>=18?(w-=18,y+=1,this.words[y]|=_>>>26):w+=8}this._strip()};function E(B,a,d,p){for(var b=0,w=0,y=Math.min(B.length,d),_=a;_<y;_++){var m=B.charCodeAt(_)-48;b*=p,m>=49?w=m-49+10:m>=17?w=m-17+10:w=m,n(m>=0&&w<p,"Invalid character"),b+=w}return b}i.prototype._parseBase=function(a,d,p){this.words=[0],this.length=1;for(var b=0,w=1;w<=67108863;w*=d)b++;b--,w=w/d|0;for(var y=a.length-p,_=y%b,m=Math.min(y,y-_)+p,f=0,x=p;x<m;x+=b)f=E(a,x,x+b,d),this.imuln(w),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(_!==0){var $=1;for(f=E(a,x,a.length,d),x=0;x<_;x++)$*=d;this.imuln($),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var d=0;d<this.length;d++)a.words[d]=this.words[d];a.length=this.length,a.negative=this.negative,a.red=this.red};function S(B,a){B.words=a.words,B.length=a.length,B.negative=a.negative,B.red=a.red}if(i.prototype._move=function(a){S(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,d){a=a||10,d=d|0||1;var p;if(a===16||a==="hex"){p="";for(var b=0,w=0,y=0;y<this.length;y++){var _=this.words[y],m=((_<<b|w)&16777215).toString(16);w=_>>>24-b&16777215,b+=2,b>=26&&(b-=26,y--),w!==0||y!==this.length-1?p=N[6-m.length]+m+p:p=m+p}for(w!==0&&(p=w.toString(16)+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(a===(a|0)&&a>=2&&a<=36){var f=M[a],x=T[a];p="";var $=this.clone();for($.negative=0;!$.isZero();){var H=$.modrn(x).toString(a);$=$.idivn(x),$.isZero()?p=H+p:p=N[f-H.length]+H+p}for(this.isZero()&&(p="0"+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,d){return this.toArrayLike(o,a,d)}),i.prototype.toArray=function(a,d){return this.toArrayLike(Array,a,d)};var I=function(a,d){return a.allocUnsafe?a.allocUnsafe(d):new a(d)};i.prototype.toArrayLike=function(a,d,p){this._strip();var b=this.byteLength(),w=p||Math.max(1,b);n(b<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var y=I(a,w),_=d==="le"?"LE":"BE";return this["_toArrayLike"+_](y,b),y},i.prototype._toArrayLikeLE=function(a,d){for(var p=0,b=0,w=0,y=0;w<this.length;w++){var _=this.words[w]<<y|b;a[p++]=_&255,p<a.length&&(a[p++]=_>>8&255),p<a.length&&(a[p++]=_>>16&255),y===6?(p<a.length&&(a[p++]=_>>24&255),b=0,y=0):(b=_>>>24,y+=2)}if(p<a.length)for(a[p++]=b;p<a.length;)a[p++]=0},i.prototype._toArrayLikeBE=function(a,d){for(var p=a.length-1,b=0,w=0,y=0;w<this.length;w++){var _=this.words[w]<<y|b;a[p--]=_&255,p>=0&&(a[p--]=_>>8&255),p>=0&&(a[p--]=_>>16&255),y===6?(p>=0&&(a[p--]=_>>24&255),b=0,y=0):(b=_>>>24,y+=2)}if(p>=0)for(a[p--]=b;p>=0;)a[p--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var d=a,p=0;return d>=4096&&(p+=13,d>>>=13),d>=64&&(p+=7,d>>>=7),d>=8&&(p+=4,d>>>=4),d>=2&&(p+=2,d>>>=2),p+d},i.prototype._zeroBits=function(a){if(a===0)return 26;var d=a,p=0;return d&8191||(p+=13,d>>>=13),d&127||(p+=7,d>>>=7),d&15||(p+=4,d>>>=4),d&3||(p+=2,d>>>=2),d&1||p++,p},i.prototype.bitLength=function(){var a=this.words[this.length-1],d=this._countBits(a);return(this.length-1)*26+d};function F(B){for(var a=new Array(B.bitLength()),d=0;d<a.length;d++){var p=d/26|0,b=d%26;a[d]=B.words[p]>>>b&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,d=0;d<this.length;d++){var p=this._zeroBits(this.words[d]);if(a+=p,p!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var d=0;d<a.length;d++)this.words[d]=this.words[d]|a.words[d];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var d;this.length>a.length?d=a:d=this;for(var p=0;p<d.length;p++)this.words[p]=this.words[p]&a.words[p];return this.length=d.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var b=0;b<p.length;b++)this.words[b]=d.words[b]^p.words[b];if(this!==d)for(;b<d.length;b++)this.words[b]=d.words[b];return this.length=d.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var d=Math.ceil(a/26)|0,p=a%26;this._expand(d),p>0&&d--;for(var b=0;b<d;b++)this.words[b]=~this.words[b]&67108863;return p>0&&(this.words[b]=~this.words[b]&67108863>>26-p),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,d){n(typeof a=="number"&&a>=0);var p=a/26|0,b=a%26;return this._expand(p+1),d?this.words[p]=this.words[p]|1<<b:this.words[p]=this.words[p]&~(1<<b),this._strip()},i.prototype.iadd=function(a){var d;if(this.negative!==0&&a.negative===0)return this.negative=0,d=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,d=this.isub(a),a.negative=1,d._normSign();var p,b;this.length>a.length?(p=this,b=a):(p=a,b=this);for(var w=0,y=0;y<b.length;y++)d=(p.words[y]|0)+(b.words[y]|0)+w,this.words[y]=d&67108863,w=d>>>26;for(;w!==0&&y<p.length;y++)d=(p.words[y]|0)+w,this.words[y]=d&67108863,w=d>>>26;if(this.length=p.length,w!==0)this.words[this.length]=w,this.length++;else if(p!==this)for(;y<p.length;y++)this.words[y]=p.words[y];return this},i.prototype.add=function(a){var d;return a.negative!==0&&this.negative===0?(a.negative=0,d=this.sub(a),a.negative^=1,d):a.negative===0&&this.negative!==0?(this.negative=0,d=a.sub(this),this.negative=1,d):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var d=this.iadd(a);return a.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var p=this.cmp(a);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,w;p>0?(b=this,w=a):(b=a,w=this);for(var y=0,_=0;_<w.length;_++)d=(b.words[_]|0)-(w.words[_]|0)+y,y=d>>26,this.words[_]=d&67108863;for(;y!==0&&_<b.length;_++)d=(b.words[_]|0)+y,y=d>>26,this.words[_]=d&67108863;if(y===0&&_<b.length&&b!==this)for(;_<b.length;_++)this.words[_]=b.words[_];return this.length=Math.max(this.length,_),b!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function z(B,a,d){d.negative=a.negative^B.negative;var p=B.length+a.length|0;d.length=p,p=p-1|0;var b=B.words[0]|0,w=a.words[0]|0,y=b*w,_=y&67108863,m=y/67108864|0;d.words[0]=_;for(var f=1;f<p;f++){for(var x=m>>>26,$=m&67108863,H=Math.min(f,a.length-1),V=Math.max(0,f-B.length+1);V<=H;V++){var ot=f-V|0;b=B.words[ot]|0,w=a.words[V]|0,y=b*w+$,x+=y/67108864|0,$=y&67108863}d.words[f]=$|0,m=x|0}return m!==0?d.words[f]=m|0:d.length--,d._strip()}var J=function(a,d,p){var b=a.words,w=d.words,y=p.words,_=0,m,f,x,$=b[0]|0,H=$&8191,V=$>>>13,ot=b[1]|0,nt=ot&8191,at=ot>>>13,Ut=b[2]|0,bt=Ut&8191,pt=Ut>>>13,kt=b[3]|0,mt=kt&8191,xt=kt>>>13,Se=b[4]|0,_t=Se&8191,Lt=Se>>>13,vn=b[5]|0,Mt=vn&8191,At=vn>>>13,Ae=b[6]|0,Tt=Ae&8191,Ot=Ae>>>13,Fe=b[7]|0,Pt=Fe&8191,g=Fe>>>13,u=b[8]|0,l=u&8191,v=u>>>13,k=b[9]|0,R=k&8191,O=k>>>13,wt=w[0]|0,dt=wt&8191,lt=wt>>>13,Rt=w[1]|0,ut=Rt&8191,Kt=Rt>>>13,rs=w[2]|0,$t=rs&8191,Wt=rs>>>13,is=w[3]|0,Vt=is&8191,jt=is>>>13,ss=w[4]|0,Gt=ss&8191,Zt=ss>>>13,os=w[5]|0,Yt=os&8191,Xt=os>>>13,as=w[6]|0,Jt=as&8191,Qt=as>>>13,cs=w[7]|0,te=cs&8191,ee=cs>>>13,us=w[8]|0,ne=us&8191,re=us>>>13,fs=w[9]|0,ie=fs&8191,se=fs>>>13;p.negative=a.negative^d.negative,p.length=19,m=Math.imul(H,dt),f=Math.imul(H,lt),f=f+Math.imul(V,dt)|0,x=Math.imul(V,lt);var Cr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,m=Math.imul(nt,dt),f=Math.imul(nt,lt),f=f+Math.imul(at,dt)|0,x=Math.imul(at,lt),m=m+Math.imul(H,ut)|0,f=f+Math.imul(H,Kt)|0,f=f+Math.imul(V,ut)|0,x=x+Math.imul(V,Kt)|0;var Ur=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,m=Math.imul(bt,dt),f=Math.imul(bt,lt),f=f+Math.imul(pt,dt)|0,x=Math.imul(pt,lt),m=m+Math.imul(nt,ut)|0,f=f+Math.imul(nt,Kt)|0,f=f+Math.imul(at,ut)|0,x=x+Math.imul(at,Kt)|0,m=m+Math.imul(H,$t)|0,f=f+Math.imul(H,Wt)|0,f=f+Math.imul(V,$t)|0,x=x+Math.imul(V,Wt)|0;var Fr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,m=Math.imul(mt,dt),f=Math.imul(mt,lt),f=f+Math.imul(xt,dt)|0,x=Math.imul(xt,lt),m=m+Math.imul(bt,ut)|0,f=f+Math.imul(bt,Kt)|0,f=f+Math.imul(pt,ut)|0,x=x+Math.imul(pt,Kt)|0,m=m+Math.imul(nt,$t)|0,f=f+Math.imul(nt,Wt)|0,f=f+Math.imul(at,$t)|0,x=x+Math.imul(at,Wt)|0,m=m+Math.imul(H,Vt)|0,f=f+Math.imul(H,jt)|0,f=f+Math.imul(V,Vt)|0,x=x+Math.imul(V,jt)|0;var Nr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,m=Math.imul(_t,dt),f=Math.imul(_t,lt),f=f+Math.imul(Lt,dt)|0,x=Math.imul(Lt,lt),m=m+Math.imul(mt,ut)|0,f=f+Math.imul(mt,Kt)|0,f=f+Math.imul(xt,ut)|0,x=x+Math.imul(xt,Kt)|0,m=m+Math.imul(bt,$t)|0,f=f+Math.imul(bt,Wt)|0,f=f+Math.imul(pt,$t)|0,x=x+Math.imul(pt,Wt)|0,m=m+Math.imul(nt,Vt)|0,f=f+Math.imul(nt,jt)|0,f=f+Math.imul(at,Vt)|0,x=x+Math.imul(at,jt)|0,m=m+Math.imul(H,Gt)|0,f=f+Math.imul(H,Zt)|0,f=f+Math.imul(V,Gt)|0,x=x+Math.imul(V,Zt)|0;var Or=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Or>>>26)|0,Or&=67108863,m=Math.imul(Mt,dt),f=Math.imul(Mt,lt),f=f+Math.imul(At,dt)|0,x=Math.imul(At,lt),m=m+Math.imul(_t,ut)|0,f=f+Math.imul(_t,Kt)|0,f=f+Math.imul(Lt,ut)|0,x=x+Math.imul(Lt,Kt)|0,m=m+Math.imul(mt,$t)|0,f=f+Math.imul(mt,Wt)|0,f=f+Math.imul(xt,$t)|0,x=x+Math.imul(xt,Wt)|0,m=m+Math.imul(bt,Vt)|0,f=f+Math.imul(bt,jt)|0,f=f+Math.imul(pt,Vt)|0,x=x+Math.imul(pt,jt)|0,m=m+Math.imul(nt,Gt)|0,f=f+Math.imul(nt,Zt)|0,f=f+Math.imul(at,Gt)|0,x=x+Math.imul(at,Zt)|0,m=m+Math.imul(H,Yt)|0,f=f+Math.imul(H,Xt)|0,f=f+Math.imul(V,Yt)|0,x=x+Math.imul(V,Xt)|0;var Pr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,m=Math.imul(Tt,dt),f=Math.imul(Tt,lt),f=f+Math.imul(Ot,dt)|0,x=Math.imul(Ot,lt),m=m+Math.imul(Mt,ut)|0,f=f+Math.imul(Mt,Kt)|0,f=f+Math.imul(At,ut)|0,x=x+Math.imul(At,Kt)|0,m=m+Math.imul(_t,$t)|0,f=f+Math.imul(_t,Wt)|0,f=f+Math.imul(Lt,$t)|0,x=x+Math.imul(Lt,Wt)|0,m=m+Math.imul(mt,Vt)|0,f=f+Math.imul(mt,jt)|0,f=f+Math.imul(xt,Vt)|0,x=x+Math.imul(xt,jt)|0,m=m+Math.imul(bt,Gt)|0,f=f+Math.imul(bt,Zt)|0,f=f+Math.imul(pt,Gt)|0,x=x+Math.imul(pt,Zt)|0,m=m+Math.imul(nt,Yt)|0,f=f+Math.imul(nt,Xt)|0,f=f+Math.imul(at,Yt)|0,x=x+Math.imul(at,Xt)|0,m=m+Math.imul(H,Jt)|0,f=f+Math.imul(H,Qt)|0,f=f+Math.imul(V,Jt)|0,x=x+Math.imul(V,Qt)|0;var qr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(Pt,dt),f=Math.imul(Pt,lt),f=f+Math.imul(g,dt)|0,x=Math.imul(g,lt),m=m+Math.imul(Tt,ut)|0,f=f+Math.imul(Tt,Kt)|0,f=f+Math.imul(Ot,ut)|0,x=x+Math.imul(Ot,Kt)|0,m=m+Math.imul(Mt,$t)|0,f=f+Math.imul(Mt,Wt)|0,f=f+Math.imul(At,$t)|0,x=x+Math.imul(At,Wt)|0,m=m+Math.imul(_t,Vt)|0,f=f+Math.imul(_t,jt)|0,f=f+Math.imul(Lt,Vt)|0,x=x+Math.imul(Lt,jt)|0,m=m+Math.imul(mt,Gt)|0,f=f+Math.imul(mt,Zt)|0,f=f+Math.imul(xt,Gt)|0,x=x+Math.imul(xt,Zt)|0,m=m+Math.imul(bt,Yt)|0,f=f+Math.imul(bt,Xt)|0,f=f+Math.imul(pt,Yt)|0,x=x+Math.imul(pt,Xt)|0,m=m+Math.imul(nt,Jt)|0,f=f+Math.imul(nt,Qt)|0,f=f+Math.imul(at,Jt)|0,x=x+Math.imul(at,Qt)|0,m=m+Math.imul(H,te)|0,f=f+Math.imul(H,ee)|0,f=f+Math.imul(V,te)|0,x=x+Math.imul(V,ee)|0;var Dr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,m=Math.imul(l,dt),f=Math.imul(l,lt),f=f+Math.imul(v,dt)|0,x=Math.imul(v,lt),m=m+Math.imul(Pt,ut)|0,f=f+Math.imul(Pt,Kt)|0,f=f+Math.imul(g,ut)|0,x=x+Math.imul(g,Kt)|0,m=m+Math.imul(Tt,$t)|0,f=f+Math.imul(Tt,Wt)|0,f=f+Math.imul(Ot,$t)|0,x=x+Math.imul(Ot,Wt)|0,m=m+Math.imul(Mt,Vt)|0,f=f+Math.imul(Mt,jt)|0,f=f+Math.imul(At,Vt)|0,x=x+Math.imul(At,jt)|0,m=m+Math.imul(_t,Gt)|0,f=f+Math.imul(_t,Zt)|0,f=f+Math.imul(Lt,Gt)|0,x=x+Math.imul(Lt,Zt)|0,m=m+Math.imul(mt,Yt)|0,f=f+Math.imul(mt,Xt)|0,f=f+Math.imul(xt,Yt)|0,x=x+Math.imul(xt,Xt)|0,m=m+Math.imul(bt,Jt)|0,f=f+Math.imul(bt,Qt)|0,f=f+Math.imul(pt,Jt)|0,x=x+Math.imul(pt,Qt)|0,m=m+Math.imul(nt,te)|0,f=f+Math.imul(nt,ee)|0,f=f+Math.imul(at,te)|0,x=x+Math.imul(at,ee)|0,m=m+Math.imul(H,ne)|0,f=f+Math.imul(H,re)|0,f=f+Math.imul(V,ne)|0,x=x+Math.imul(V,re)|0;var zr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(R,dt),f=Math.imul(R,lt),f=f+Math.imul(O,dt)|0,x=Math.imul(O,lt),m=m+Math.imul(l,ut)|0,f=f+Math.imul(l,Kt)|0,f=f+Math.imul(v,ut)|0,x=x+Math.imul(v,Kt)|0,m=m+Math.imul(Pt,$t)|0,f=f+Math.imul(Pt,Wt)|0,f=f+Math.imul(g,$t)|0,x=x+Math.imul(g,Wt)|0,m=m+Math.imul(Tt,Vt)|0,f=f+Math.imul(Tt,jt)|0,f=f+Math.imul(Ot,Vt)|0,x=x+Math.imul(Ot,jt)|0,m=m+Math.imul(Mt,Gt)|0,f=f+Math.imul(Mt,Zt)|0,f=f+Math.imul(At,Gt)|0,x=x+Math.imul(At,Zt)|0,m=m+Math.imul(_t,Yt)|0,f=f+Math.imul(_t,Xt)|0,f=f+Math.imul(Lt,Yt)|0,x=x+Math.imul(Lt,Xt)|0,m=m+Math.imul(mt,Jt)|0,f=f+Math.imul(mt,Qt)|0,f=f+Math.imul(xt,Jt)|0,x=x+Math.imul(xt,Qt)|0,m=m+Math.imul(bt,te)|0,f=f+Math.imul(bt,ee)|0,f=f+Math.imul(pt,te)|0,x=x+Math.imul(pt,ee)|0,m=m+Math.imul(nt,ne)|0,f=f+Math.imul(nt,re)|0,f=f+Math.imul(at,ne)|0,x=x+Math.imul(at,re)|0,m=m+Math.imul(H,ie)|0,f=f+Math.imul(H,se)|0,f=f+Math.imul(V,ie)|0,x=x+Math.imul(V,se)|0;var Hr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,m=Math.imul(R,ut),f=Math.imul(R,Kt),f=f+Math.imul(O,ut)|0,x=Math.imul(O,Kt),m=m+Math.imul(l,$t)|0,f=f+Math.imul(l,Wt)|0,f=f+Math.imul(v,$t)|0,x=x+Math.imul(v,Wt)|0,m=m+Math.imul(Pt,Vt)|0,f=f+Math.imul(Pt,jt)|0,f=f+Math.imul(g,Vt)|0,x=x+Math.imul(g,jt)|0,m=m+Math.imul(Tt,Gt)|0,f=f+Math.imul(Tt,Zt)|0,f=f+Math.imul(Ot,Gt)|0,x=x+Math.imul(Ot,Zt)|0,m=m+Math.imul(Mt,Yt)|0,f=f+Math.imul(Mt,Xt)|0,f=f+Math.imul(At,Yt)|0,x=x+Math.imul(At,Xt)|0,m=m+Math.imul(_t,Jt)|0,f=f+Math.imul(_t,Qt)|0,f=f+Math.imul(Lt,Jt)|0,x=x+Math.imul(Lt,Qt)|0,m=m+Math.imul(mt,te)|0,f=f+Math.imul(mt,ee)|0,f=f+Math.imul(xt,te)|0,x=x+Math.imul(xt,ee)|0,m=m+Math.imul(bt,ne)|0,f=f+Math.imul(bt,re)|0,f=f+Math.imul(pt,ne)|0,x=x+Math.imul(pt,re)|0,m=m+Math.imul(nt,ie)|0,f=f+Math.imul(nt,se)|0,f=f+Math.imul(at,ie)|0,x=x+Math.imul(at,se)|0;var Kr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,m=Math.imul(R,$t),f=Math.imul(R,Wt),f=f+Math.imul(O,$t)|0,x=Math.imul(O,Wt),m=m+Math.imul(l,Vt)|0,f=f+Math.imul(l,jt)|0,f=f+Math.imul(v,Vt)|0,x=x+Math.imul(v,jt)|0,m=m+Math.imul(Pt,Gt)|0,f=f+Math.imul(Pt,Zt)|0,f=f+Math.imul(g,Gt)|0,x=x+Math.imul(g,Zt)|0,m=m+Math.imul(Tt,Yt)|0,f=f+Math.imul(Tt,Xt)|0,f=f+Math.imul(Ot,Yt)|0,x=x+Math.imul(Ot,Xt)|0,m=m+Math.imul(Mt,Jt)|0,f=f+Math.imul(Mt,Qt)|0,f=f+Math.imul(At,Jt)|0,x=x+Math.imul(At,Qt)|0,m=m+Math.imul(_t,te)|0,f=f+Math.imul(_t,ee)|0,f=f+Math.imul(Lt,te)|0,x=x+Math.imul(Lt,ee)|0,m=m+Math.imul(mt,ne)|0,f=f+Math.imul(mt,re)|0,f=f+Math.imul(xt,ne)|0,x=x+Math.imul(xt,re)|0,m=m+Math.imul(bt,ie)|0,f=f+Math.imul(bt,se)|0,f=f+Math.imul(pt,ie)|0,x=x+Math.imul(pt,se)|0;var $r=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+($r>>>26)|0,$r&=67108863,m=Math.imul(R,Vt),f=Math.imul(R,jt),f=f+Math.imul(O,Vt)|0,x=Math.imul(O,jt),m=m+Math.imul(l,Gt)|0,f=f+Math.imul(l,Zt)|0,f=f+Math.imul(v,Gt)|0,x=x+Math.imul(v,Zt)|0,m=m+Math.imul(Pt,Yt)|0,f=f+Math.imul(Pt,Xt)|0,f=f+Math.imul(g,Yt)|0,x=x+Math.imul(g,Xt)|0,m=m+Math.imul(Tt,Jt)|0,f=f+Math.imul(Tt,Qt)|0,f=f+Math.imul(Ot,Jt)|0,x=x+Math.imul(Ot,Qt)|0,m=m+Math.imul(Mt,te)|0,f=f+Math.imul(Mt,ee)|0,f=f+Math.imul(At,te)|0,x=x+Math.imul(At,ee)|0,m=m+Math.imul(_t,ne)|0,f=f+Math.imul(_t,re)|0,f=f+Math.imul(Lt,ne)|0,x=x+Math.imul(Lt,re)|0,m=m+Math.imul(mt,ie)|0,f=f+Math.imul(mt,se)|0,f=f+Math.imul(xt,ie)|0,x=x+Math.imul(xt,se)|0;var Wr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(R,Gt),f=Math.imul(R,Zt),f=f+Math.imul(O,Gt)|0,x=Math.imul(O,Zt),m=m+Math.imul(l,Yt)|0,f=f+Math.imul(l,Xt)|0,f=f+Math.imul(v,Yt)|0,x=x+Math.imul(v,Xt)|0,m=m+Math.imul(Pt,Jt)|0,f=f+Math.imul(Pt,Qt)|0,f=f+Math.imul(g,Jt)|0,x=x+Math.imul(g,Qt)|0,m=m+Math.imul(Tt,te)|0,f=f+Math.imul(Tt,ee)|0,f=f+Math.imul(Ot,te)|0,x=x+Math.imul(Ot,ee)|0,m=m+Math.imul(Mt,ne)|0,f=f+Math.imul(Mt,re)|0,f=f+Math.imul(At,ne)|0,x=x+Math.imul(At,re)|0,m=m+Math.imul(_t,ie)|0,f=f+Math.imul(_t,se)|0,f=f+Math.imul(Lt,ie)|0,x=x+Math.imul(Lt,se)|0;var Vr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,m=Math.imul(R,Yt),f=Math.imul(R,Xt),f=f+Math.imul(O,Yt)|0,x=Math.imul(O,Xt),m=m+Math.imul(l,Jt)|0,f=f+Math.imul(l,Qt)|0,f=f+Math.imul(v,Jt)|0,x=x+Math.imul(v,Qt)|0,m=m+Math.imul(Pt,te)|0,f=f+Math.imul(Pt,ee)|0,f=f+Math.imul(g,te)|0,x=x+Math.imul(g,ee)|0,m=m+Math.imul(Tt,ne)|0,f=f+Math.imul(Tt,re)|0,f=f+Math.imul(Ot,ne)|0,x=x+Math.imul(Ot,re)|0,m=m+Math.imul(Mt,ie)|0,f=f+Math.imul(Mt,se)|0,f=f+Math.imul(At,ie)|0,x=x+Math.imul(At,se)|0;var jr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(jr>>>26)|0,jr&=67108863,m=Math.imul(R,Jt),f=Math.imul(R,Qt),f=f+Math.imul(O,Jt)|0,x=Math.imul(O,Qt),m=m+Math.imul(l,te)|0,f=f+Math.imul(l,ee)|0,f=f+Math.imul(v,te)|0,x=x+Math.imul(v,ee)|0,m=m+Math.imul(Pt,ne)|0,f=f+Math.imul(Pt,re)|0,f=f+Math.imul(g,ne)|0,x=x+Math.imul(g,re)|0,m=m+Math.imul(Tt,ie)|0,f=f+Math.imul(Tt,se)|0,f=f+Math.imul(Ot,ie)|0,x=x+Math.imul(Ot,se)|0;var Gr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(R,te),f=Math.imul(R,ee),f=f+Math.imul(O,te)|0,x=Math.imul(O,ee),m=m+Math.imul(l,ne)|0,f=f+Math.imul(l,re)|0,f=f+Math.imul(v,ne)|0,x=x+Math.imul(v,re)|0,m=m+Math.imul(Pt,ie)|0,f=f+Math.imul(Pt,se)|0,f=f+Math.imul(g,ie)|0,x=x+Math.imul(g,se)|0;var Zr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,m=Math.imul(R,ne),f=Math.imul(R,re),f=f+Math.imul(O,ne)|0,x=Math.imul(O,re),m=m+Math.imul(l,ie)|0,f=f+Math.imul(l,se)|0,f=f+Math.imul(v,ie)|0,x=x+Math.imul(v,se)|0;var Yr=(_+m|0)+((f&8191)<<13)|0;_=(x+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(R,ie),f=Math.imul(R,se),f=f+Math.imul(O,ie)|0,x=Math.imul(O,se);var Xr=(_+m|0)+((f&8191)<<13)|0;return _=(x+(f>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,y[0]=Cr,y[1]=Ur,y[2]=Fr,y[3]=Nr,y[4]=Or,y[5]=Pr,y[6]=qr,y[7]=Dr,y[8]=zr,y[9]=Hr,y[10]=Kr,y[11]=$r,y[12]=Wr,y[13]=Vr,y[14]=jr,y[15]=Gr,y[16]=Zr,y[17]=Yr,y[18]=Xr,_!==0&&(y[19]=_,p.length++),p};Math.imul||(J=z);function P(B,a,d){d.negative=a.negative^B.negative,d.length=B.length+a.length;for(var p=0,b=0,w=0;w<d.length-1;w++){var y=b;b=0;for(var _=p&67108863,m=Math.min(w,a.length-1),f=Math.max(0,w-B.length+1);f<=m;f++){var x=w-f,$=B.words[x]|0,H=a.words[f]|0,V=$*H,ot=V&67108863;y=y+(V/67108864|0)|0,ot=ot+_|0,_=ot&67108863,y=y+(ot>>>26)|0,b+=y>>>26,y&=67108863}d.words[w]=_,p=y,y=b}return p!==0?d.words[w]=p:d.length--,d._strip()}function C(B,a,d){return P(B,a,d)}i.prototype.mulTo=function(a,d){var p,b=this.length+a.length;return this.length===10&&a.length===10?p=J(this,a,d):b<63?p=z(this,a,d):b<1024?p=P(this,a,d):p=C(this,a,d),p},i.prototype.mul=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),this.mulTo(a,d)},i.prototype.mulf=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),C(this,a,d)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var d=a<0;d&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var p=0,b=0;b<this.length;b++){var w=(this.words[b]|0)*a,y=(w&67108863)+(p&67108863);p>>=26,p+=w/67108864|0,p+=y>>>26,this.words[b]=y&67108863}return p!==0&&(this.words[b]=p,this.length++),this.length=a===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var d=F(a);if(d.length===0)return new i(1);for(var p=this,b=0;b<d.length&&d[b]===0;b++,p=p.sqr());if(++b<d.length)for(var w=p.sqr();b<d.length;b++,w=w.sqr())d[b]!==0&&(p=p.mul(w));return p},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var d=a%26,p=(a-d)/26,b=67108863>>>26-d<<26-d,w;if(d!==0){var y=0;for(w=0;w<this.length;w++){var _=this.words[w]&b,m=(this.words[w]|0)-_<<d;this.words[w]=m|y,y=_>>>26-d}y&&(this.words[w]=y,this.length++)}if(p!==0){for(w=this.length-1;w>=0;w--)this.words[w+p]=this.words[w];for(w=0;w<p;w++)this.words[w]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,d,p){n(typeof a=="number"&&a>=0);var b;d?b=(d-d%26)/26:b=0;var w=a%26,y=Math.min((a-w)/26,this.length),_=67108863^67108863>>>w<<w,m=p;if(b-=y,b=Math.max(0,b),m){for(var f=0;f<y;f++)m.words[f]=this.words[f];m.length=y}if(y!==0)if(this.length>y)for(this.length-=y,f=0;f<this.length;f++)this.words[f]=this.words[f+y];else this.words[0]=0,this.length=1;var x=0;for(f=this.length-1;f>=0&&(x!==0||f>=b);f--){var $=this.words[f]|0;this.words[f]=x<<26-w|$>>>w,x=$&_}return m&&x!==0&&(m.words[m.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,d,p){return n(this.negative===0),this.iushrn(a,d,p)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var d=a%26,p=(a-d)/26,b=1<<d;if(this.length<=p)return!1;var w=this.words[p];return!!(w&b)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var d=a%26,p=(a-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(d!==0&&p++,this.length=Math.min(p,this.length),d!==0){var b=67108863^67108863>>>d<<d;this.words[this.length-1]&=b}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,d,p){var b=a.length+p,w;this._expand(b);var y,_=0;for(w=0;w<a.length;w++){y=(this.words[w+p]|0)+_;var m=(a.words[w]|0)*d;y-=m&67108863,_=(y>>26)-(m/67108864|0),this.words[w+p]=y&67108863}for(;w<this.length-p;w++)y=(this.words[w+p]|0)+_,_=y>>26,this.words[w+p]=y&67108863;if(_===0)return this._strip();for(n(_===-1),_=0,w=0;w<this.length;w++)y=-(this.words[w]|0)+_,_=y>>26,this.words[w]=y&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,d){var p=this.length-a.length,b=this.clone(),w=a,y=w.words[w.length-1]|0,_=this._countBits(y);p=26-_,p!==0&&(w=w.ushln(p),b.iushln(p),y=w.words[w.length-1]|0);var m=b.length-w.length,f;if(d!=="mod"){f=new i(null),f.length=m+1,f.words=new Array(f.length);for(var x=0;x<f.length;x++)f.words[x]=0}var $=b.clone()._ishlnsubmul(w,1,m);$.negative===0&&(b=$,f&&(f.words[m]=1));for(var H=m-1;H>=0;H--){var V=(b.words[w.length+H]|0)*67108864+(b.words[w.length+H-1]|0);for(V=Math.min(V/y|0,67108863),b._ishlnsubmul(w,V,H);b.negative!==0;)V--,b.negative=0,b._ishlnsubmul(w,1,H),b.isZero()||(b.negative^=1);f&&(f.words[H]=V)}return f&&f._strip(),b._strip(),d!=="div"&&p!==0&&b.iushrn(p),{div:f||null,mod:b}},i.prototype.divmod=function(a,d,p){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var b,w,y;return this.negative!==0&&a.negative===0?(y=this.neg().divmod(a,d),d!=="mod"&&(b=y.div.neg()),d!=="div"&&(w=y.mod.neg(),p&&w.negative!==0&&w.iadd(a)),{div:b,mod:w}):this.negative===0&&a.negative!==0?(y=this.divmod(a.neg(),d),d!=="mod"&&(b=y.div.neg()),{div:b,mod:y.mod}):this.negative&a.negative?(y=this.neg().divmod(a.neg(),d),d!=="div"&&(w=y.mod.neg(),p&&w.negative!==0&&w.isub(a)),{div:y.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?d==="div"?{div:this.divn(a.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,d)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var d=this.divmod(a);if(d.mod.isZero())return d.div;var p=d.div.negative!==0?d.mod.isub(a):d.mod,b=a.ushrn(1),w=a.andln(1),y=p.cmp(b);return y<0||w===1&&y===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(a){var d=a<0;d&&(a=-a),n(a<=67108863);for(var p=(1<<26)%a,b=0,w=this.length-1;w>=0;w--)b=(p*b+(this.words[w]|0))%a;return d?-b:b},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var d=a<0;d&&(a=-a),n(a<=67108863);for(var p=0,b=this.length-1;b>=0;b--){var w=(this.words[b]|0)+p*67108864;this.words[b]=w/a|0,p=w%a}return this._strip(),d?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var d=this,p=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var b=new i(1),w=new i(0),y=new i(0),_=new i(1),m=0;d.isEven()&&p.isEven();)d.iushrn(1),p.iushrn(1),++m;for(var f=p.clone(),x=d.clone();!d.isZero();){for(var $=0,H=1;!(d.words[0]&H)&&$<26;++$,H<<=1);if($>0)for(d.iushrn($);$-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(f),w.isub(x)),b.iushrn(1),w.iushrn(1);for(var V=0,ot=1;!(p.words[0]&ot)&&V<26;++V,ot<<=1);if(V>0)for(p.iushrn(V);V-- >0;)(y.isOdd()||_.isOdd())&&(y.iadd(f),_.isub(x)),y.iushrn(1),_.iushrn(1);d.cmp(p)>=0?(d.isub(p),b.isub(y),w.isub(_)):(p.isub(d),y.isub(b),_.isub(w))}return{a:y,b:_,gcd:p.iushln(m)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var d=this,p=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var b=new i(1),w=new i(0),y=p.clone();d.cmpn(1)>0&&p.cmpn(1)>0;){for(var _=0,m=1;!(d.words[0]&m)&&_<26;++_,m<<=1);if(_>0)for(d.iushrn(_);_-- >0;)b.isOdd()&&b.iadd(y),b.iushrn(1);for(var f=0,x=1;!(p.words[0]&x)&&f<26;++f,x<<=1);if(f>0)for(p.iushrn(f);f-- >0;)w.isOdd()&&w.iadd(y),w.iushrn(1);d.cmp(p)>=0?(d.isub(p),b.isub(w)):(p.isub(d),w.isub(b))}var $;return d.cmpn(1)===0?$=b:$=w,$.cmpn(0)<0&&$.iadd(a),$},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var d=this.clone(),p=a.clone();d.negative=0,p.negative=0;for(var b=0;d.isEven()&&p.isEven();b++)d.iushrn(1),p.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;p.isEven();)p.iushrn(1);var w=d.cmp(p);if(w<0){var y=d;d=p,p=y}else if(w===0||p.cmpn(1)===0)break;d.isub(p)}while(!0);return p.iushln(b)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var d=a%26,p=(a-d)/26,b=1<<d;if(this.length<=p)return this._expand(p+1),this.words[p]|=b,this;for(var w=b,y=p;w!==0&&y<this.length;y++){var _=this.words[y]|0;_+=w,w=_>>>26,_&=67108863,this.words[y]=_}return w!==0&&(this.words[y]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var d=a<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var p;if(this.length>1)p=1;else{d&&(a=-a),n(a<=67108863,"Number is too big");var b=this.words[0]|0;p=b===a?0:b<a?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var d=this.ucmp(a);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var d=0,p=this.length-1;p>=0;p--){var b=this.words[p]|0,w=a.words[p]|0;if(b!==w){b<w?d=-1:b>w&&(d=1);break}}return d},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new G(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var q={k256:null,p224:null,p192:null,p25519:null};function W(B,a){this.name=B,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},W.prototype.ireduce=function(a){var d=a,p;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),p=d.bitLength();while(p>this.n);var b=p<this.n?-1:d.ucmp(this.p);return b===0?(d.words[0]=0,d.length=1):b>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},W.prototype.split=function(a,d){a.iushrn(this.n,0,d)},W.prototype.imulK=function(a){return a.imul(this.k)};function X(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(X,W),X.prototype.split=function(a,d){for(var p=4194303,b=Math.min(a.length,9),w=0;w<b;w++)d.words[w]=a.words[w];if(d.length=b,a.length<=9){a.words[0]=0,a.length=1;return}var y=a.words[9];for(d.words[d.length++]=y&p,w=10;w<a.length;w++){var _=a.words[w]|0;a.words[w-10]=(_&p)<<4|y>>>22,y=_}y>>>=22,a.words[w-10]=y,y===0&&a.length>10?a.length-=10:a.length-=9},X.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var d=0,p=0;p<a.length;p++){var b=a.words[p]|0;d+=b*977,a.words[p]=d&67108863,d=b*64+(d/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function et(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(et,W);function ft(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ft,W);function ht(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ht,W),ht.prototype.imulK=function(a){for(var d=0,p=0;p<a.length;p++){var b=(a.words[p]|0)*19+d,w=b&67108863;b>>>=26,a.words[p]=w,d=b}return d!==0&&(a.words[a.length++]=d),a},i._prime=function(a){if(q[a])return q[a];var d;if(a==="k256")d=new X;else if(a==="p224")d=new et;else if(a==="p192")d=new ft;else if(a==="p25519")d=new ht;else throw new Error("Unknown prime "+a);return q[a]=d,d};function G(B){if(typeof B=="string"){var a=i._prime(B);this.m=a.p,this.prime=a}else n(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}G.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},G.prototype._verify2=function(a,d){n((a.negative|d.negative)===0,"red works only with positives"),n(a.red&&a.red===d.red,"red works only with red numbers")},G.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(S(a,a.umod(this.m)._forceRed(this)),a)},G.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},G.prototype.add=function(a,d){this._verify2(a,d);var p=a.add(d);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},G.prototype.iadd=function(a,d){this._verify2(a,d);var p=a.iadd(d);return p.cmp(this.m)>=0&&p.isub(this.m),p},G.prototype.sub=function(a,d){this._verify2(a,d);var p=a.sub(d);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},G.prototype.isub=function(a,d){this._verify2(a,d);var p=a.isub(d);return p.cmpn(0)<0&&p.iadd(this.m),p},G.prototype.shl=function(a,d){return this._verify1(a),this.imod(a.ushln(d))},G.prototype.imul=function(a,d){return this._verify2(a,d),this.imod(a.imul(d))},G.prototype.mul=function(a,d){return this._verify2(a,d),this.imod(a.mul(d))},G.prototype.isqr=function(a){return this.imul(a,a.clone())},G.prototype.sqr=function(a){return this.mul(a,a)},G.prototype.sqrt=function(a){if(a.isZero())return a.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(a,p)}for(var b=this.m.subn(1),w=0;!b.isZero()&&b.andln(1)===0;)w++,b.iushrn(1);n(!b.isZero());var y=new i(1).toRed(this),_=y.redNeg(),m=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,m).cmp(_)!==0;)f.redIAdd(_);for(var x=this.pow(f,b),$=this.pow(a,b.addn(1).iushrn(1)),H=this.pow(a,b),V=w;H.cmp(y)!==0;){for(var ot=H,nt=0;ot.cmp(y)!==0;nt++)ot=ot.redSqr();n(nt<V);var at=this.pow(x,new i(1).iushln(V-nt-1));$=$.redMul(at),x=at.redSqr(),H=H.redMul(x),V=nt}return $},G.prototype.invm=function(a){var d=a._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},G.prototype.pow=function(a,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return a.clone();var p=4,b=new Array(1<<p);b[0]=new i(1).toRed(this),b[1]=a;for(var w=2;w<b.length;w++)b[w]=this.mul(b[w-1],a);var y=b[0],_=0,m=0,f=d.bitLength()%26;for(f===0&&(f=26),w=d.length-1;w>=0;w--){for(var x=d.words[w],$=f-1;$>=0;$--){var H=x>>$&1;if(y!==b[0]&&(y=this.sqr(y)),H===0&&_===0){m=0;continue}_<<=1,_|=H,m++,!(m!==p&&(w!==0||$!==0))&&(y=this.mul(y,b[_]),m=0,_=0)}f=26}return y},G.prototype.convertTo=function(a){var d=a.umod(this.m);return d===a?d.clone():d},G.prototype.convertFrom=function(a){var d=a.clone();return d.red=null,d},i.mont=function(a){return new it(a)};function it(B){G.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(it,G),it.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},it.prototype.convertFrom=function(a){var d=this.imod(a.mul(this.rinv));return d.red=null,d},it.prototype.imul=function(a,d){if(a.isZero()||d.isZero())return a.words[0]=0,a.length=1,a;var p=a.imul(d),b=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=p.isub(b).iushrn(this.shift),y=w;return w.cmp(this.m)>=0?y=w.isub(this.m):w.cmpn(0)<0&&(y=w.iadd(this.m)),y._forceRed(this)},it.prototype.mul=function(a,d){if(a.isZero()||d.isZero())return new i(0)._forceRed(this);var p=a.mul(d),b=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=p.isub(b).iushrn(this.shift),y=w;return w.cmp(this.m)>=0?y=w.isub(this.m):w.cmpn(0)<0&&(y=w.iadd(this.m)),y._forceRed(this)},it.prototype.invm=function(a){var d=this.imod(a._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,Pe)})(Di);var co=Di.exports;const Ss=xr(co);var Si={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=gt,n=e.Buffer;function s(o,c){for(var h in o)c[h]=o[h]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,c,h){return n(o,c,h)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,c,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,h)},i.alloc=function(o,c,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var E=n(o);return c!==void 0?typeof h=="string"?E.fill(c,h):E.fill(c):E.fill(0),E},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Si,Si.exports);var Ec=Si.exports,ir=Ec.Buffer;function Sc(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,c=r.charAt(0),h=Math.log(o)/Math.log(256),E=Math.log(256)/Math.log(o);function S(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=ir.from(M)),!ir.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var T=0,I=0,F=0,z=M.length;F!==z&&M[F]===0;)F++,T++;for(var J=(z-F)*E+1>>>0,P=new Uint8Array(J);F!==z;){for(var C=M[F],q=0,W=J-1;(C!==0||q<I)&&W!==-1;W--,q++)C+=256*P[W]>>>0,P[W]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");I=q,F++}for(var X=J-I;X!==J&&P[X]===0;)X++;for(var et=c.repeat(T);X<J;++X)et+=r.charAt(P[X]);return et}function A(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return ir.alloc(0);for(var T=0,I=0,F=0;M[T]===c;)I++,T++;for(var z=(M.length-T)*h+1>>>0,J=new Uint8Array(z);T<M.length;){var P=M.charCodeAt(T);if(P>255)return;var C=t[P];if(C===255)return;for(var q=0,W=z-1;(C!==0||q<F)&&W!==-1;W--,q++)C+=o*J[W]>>>0,J[W]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");F=q,T++}for(var X=z-F;X!==z&&J[X]===0;)X++;var et=ir.allocUnsafe(I+(z-X));et.fill(0,0,I);for(var ft=I;X!==z;)et[ft++]=J[X++];return et}function N(M){var T=A(M);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:S,decodeUnsafe:A,decode:N}}var Bc=Sc,_c=Bc,Ac="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",uo=_c(Ac);const he=xr(uo),Bs=Gs;var le={};function Ye(r,t,e){return t<=r&&r<=e}function Br(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function kc(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=i&1023,h=o&1023;s.push(65536+(c<<10)+h),n+=1}else s.push(65533)}n+=1}return s}function Ic(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var hr=-1;function zi(r){this.tokens=[].slice.call(r)}zi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():hr},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Un=-1;function oi(r,t){if(r)throw TypeError("Decoder error");return t||65533}var dr="utf-8";function pr(r,t){if(!(this instanceof pr))return new pr(r,t);if(r=r!==void 0?String(r).toLowerCase():dr,r!==dr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Br(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}pr.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Br(e),this._streaming||(this._decoder=new Mc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new zi(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Un);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Un)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Ic(i)}};function gr(r,t){if(!(this instanceof gr))return new gr(r,t);if(r=r!==void 0?String(r).toLowerCase():dr,r!==dr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Br(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}gr.prototype={encode:function(t,e){t=t?String(t):"",e=Br(e),this._streaming||(this._encoder=new Rc(this._options)),this._streaming=!!e.stream;for(var n=[],s=new zi(kc(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Un);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Un;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Mc(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(c,h){if(h===hr&&s!==0)return s=0,oi(t);if(h===hr)return Un;if(s===0){if(Ye(h,0,127))return h;if(Ye(h,194,223))s=1,e=h-192;else if(Ye(h,224,239))h===224&&(i=160),h===237&&(o=159),s=2,e=h-224;else if(Ye(h,240,244))h===240&&(i=144),h===244&&(o=143),s=3,e=h-240;else return oi(t);return e=e<<6*s,null}if(!Ye(h,i,o))return e=s=n=0,i=128,o=191,c.prepend(h),oi(t);if(i=128,o=191,n+=1,e+=h-128<<6*(s-n),n!==s)return null;var E=e;return e=s=n=0,E}}function Rc(r){r.fatal,this.handler=function(t,e){if(e===hr)return Un;if(Ye(e,0,127))return e;var n,s;Ye(e,128,2047)?(n=1,s=192):Ye(e,2048,65535)?(n=2,s=224):Ye(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Lc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:pr,TextEncoder:gr},Symbol.toStringTag,{value:"Module"})),Tc=Ri(Lc);var Cc=Pe&&Pe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Uc=Pe&&Pe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),$e=Pe&&Pe.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},Fc=Pe&&Pe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Cc(t,r,e);return Uc(t,r),t},fo=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(le,"__esModule",{value:!0});var lo=le.deserializeUnchecked=yo=le.deserialize=wo=le.serialize=le.BinaryReader=le.BinaryWriter=le.BorshError=le.baseDecode=le.baseEncode=void 0;const on=fo(co),ho=fo(uo),Nc=Fc(Tc),Oc=typeof TextDecoder!="function"?Nc.TextDecoder:TextDecoder,Pc=new Oc("utf-8",{fatal:!0});function qc(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),ho.default.encode(Buffer.from(r))}le.baseEncode=qc;function Dc(r){return Buffer.from(ho.default.decode(r))}le.baseDecode=Dc;const ai=1024;class ve extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}le.BorshError=ve;class po{constructor(){this.buf=Buffer.alloc(ai),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ai)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new on.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new on.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new on.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new on.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(ai)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}le.BinaryWriter=po;function We(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new ve("Reached the end of buffer when deserializing")}throw i}}}class Ie{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new on.default(t,"le")}readU128(){const t=this.readBuffer(16);return new on.default(t,"le")}readU256(){const t=this.readBuffer(32);return new on.default(t,"le")}readU512(){const t=this.readBuffer(64);return new on.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ve(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Pc.decode(e)}catch(n){throw new ve(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}$e([We],Ie.prototype,"readU8",null);$e([We],Ie.prototype,"readU16",null);$e([We],Ie.prototype,"readU32",null);$e([We],Ie.prototype,"readU64",null);$e([We],Ie.prototype,"readU128",null);$e([We],Ie.prototype,"readU256",null);$e([We],Ie.prototype,"readU512",null);$e([We],Ie.prototype,"readString",null);$e([We],Ie.prototype,"readFixedArray",null);$e([We],Ie.prototype,"readArray",null);le.BinaryReader=Ie;function go(r){return r.charAt(0).toUpperCase()+r.slice(1)}function ln(r,t,e,n,s){try{if(typeof n=="string")s[`write${go(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new ve(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new ve(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)ln(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{ln(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),ln(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{ln(r,t,o,n.key,s),ln(r,t,i,n.value,s)});break}default:throw new ve(`FieldType ${n} unrecognized`)}else mo(r,e,s)}catch(i){throw i instanceof ve&&i.addToFieldPath(t),i}}function mo(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new ve(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{ln(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,c]=n.values[i];if(o===s){e.writeU8(i),ln(r,o,t[o],c,e);break}}}else throw new ve(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function zc(r,t,e=po){const n=new e;return mo(r,t,n),n.toArray()}var wo=le.serialize=zc;function hn(r,t,e,n){try{if(typeof e=="string")return n[`read${go(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(hn(r,null,e[0],n));return s}else return n.readArray(()=>hn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?hn(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const c=hn(r,t,e.key,n),h=hn(r,t,e.value,n);s.set(c,h)}return s}return Hi(r,e,n)}catch(s){throw s instanceof ve&&s.addToFieldPath(t),s}}function Hi(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new ve(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=hn(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new ve(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],c=hn(r,i,o,e);return new t({[i]:c})}throw new ve(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Hc(r,t,e,n=Ie){const s=new n(e),i=Hi(r,t,s);if(s.offset<e.length)throw new ve(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var yo=le.deserialize=Hc;function Kc(r,t,e,n=Ie){const s=new n(e);return Hi(r,t,s)}lo=le.deserializeUnchecked=Kc;var U={};Object.defineProperty(U,"__esModule",{value:!0});U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=fe=U.nu64=U.u48=U.u40=rt=U.u32=U.u24=Re=U.u16=St=U.u8=gn=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0;U.constant=U.utf8=U.cstr=Dt=U.blob=U.unionLayoutDiscriminator=U.union=xe=U.seq=U.bits=Q=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=ke=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;const Ki=gt;function On(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=On;function Et(r){return On(r),Ki.Buffer.from(r.buffer,r.byteOffset,r.length)}U.uint8ArrayToBuffer=Et;class Bt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}U.Layout=Bt;function $i(r,t){return t.property?r+"["+t.property+"]":r}U.nameWithProperty=$i;function $c(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Bt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}U.bindConstructorLayout=$c;class Be extends Bt{isCount(){throw new Error("ExternalLayout is abstract")}}U.ExternalLayout=Be;class bo extends Be{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){On(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}U.GreedyCount=bo;class Wi extends Be{constructor(t,e=0,n){if(!(t instanceof Bt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ue||this.layout instanceof Oe}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}U.OffsetLayout=Wi;class Ue extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readUIntLE(e,this.span)}encode(t,e,n=0){return Et(e).writeUIntLE(t,n,this.span),this.span}}U.UInt=Ue;class Oe extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readUIntBE(e,this.span)}encode(t,e,n=0){return Et(e).writeUIntBE(t,n,this.span),this.span}}U.UIntBE=Oe;class mn extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readIntLE(e,this.span)}encode(t,e,n=0){return Et(e).writeIntLE(t,n,this.span),this.span}}U.Int=mn;class Pn extends Bt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Et(t).readIntBE(e,this.span)}encode(t,e,n=0){return Et(e).writeIntBE(t,n,this.span),this.span}}U.IntBE=Pn;const Bi=Math.pow(2,32);function _r(r){const t=Math.floor(r/Bi),e=r-t*Bi;return{hi32:t,lo32:e}}function Ar(r,t){return r*Bi+t}class vo extends Bt{constructor(t){super(8,t)}decode(t,e=0){const n=Et(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return Ar(i,s)}encode(t,e,n=0){const s=_r(t),i=Et(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}U.NearUInt64=vo;class xo extends Bt{constructor(t){super(8,t)}decode(t,e=0){const n=Et(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return Ar(s,i)}encode(t,e,n=0){const s=_r(t),i=Et(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}U.NearUInt64BE=xo;class Eo extends Bt{constructor(t){super(8,t)}decode(t,e=0){const n=Et(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return Ar(i,s)}encode(t,e,n=0){const s=_r(t),i=Et(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}U.NearInt64=Eo;class So extends Bt{constructor(t){super(8,t)}decode(t,e=0){const n=Et(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return Ar(s,i)}encode(t,e,n=0){const s=_r(t),i=Et(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}U.NearInt64BE=So;class Bo extends Bt{constructor(t){super(4,t)}decode(t,e=0){return Et(t).readFloatLE(e)}encode(t,e,n=0){return Et(e).writeFloatLE(t,n),4}}U.Float=Bo;class _o extends Bt{constructor(t){super(4,t)}decode(t,e=0){return Et(t).readFloatBE(e)}encode(t,e,n=0){return Et(e).writeFloatBE(t,n),4}}U.FloatBE=_o;class Ao extends Bt{constructor(t){super(8,t)}decode(t,e=0){return Et(t).readDoubleLE(e)}encode(t,e,n=0){return Et(e).writeDoubleLE(t,n),8}}U.Double=Ao;class ko extends Bt{constructor(t){super(8,t)}decode(t,e=0){return Et(t).readDoubleBE(e)}encode(t,e,n=0){return Et(e).writeDoubleBE(t,n),8}}U.DoubleBE=ko;class Io extends Bt{constructor(t,e,n){if(!(t instanceof Bt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Be&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Be)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Be&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof Be&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,n+o),0);return this.count instanceof Be&&this.count.encode(t.length,e,n),i}}U.Sequence=Io;class Mo extends Bt{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Bt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){On(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const c of this.fields){let h=c.span;if(o=0<h?h:0,c.property!==void 0){const E=t[c.property];E!==void 0&&(o=c.encode(E,e,n),0>h&&(h=c.getSpan(e,n)))}i=n,n+=h}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}U.Structure=Mo;class Vi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}U.UnionDiscriminator=Vi;class mr extends Vi{constructor(t,e){if(!(t instanceof Be&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}U.UnionLayoutDiscriminator=mr;class ji extends Bt{constructor(t,e,n){let s;if(t instanceof Ue||t instanceof Oe)s=new mr(new Wi(t));else if(t instanceof Be&&t.isCount())s=new mr(t);else if(t instanceof Vi)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Bt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Ue||t instanceof Oe)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Ue||t instanceof Oe,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let h=0;this.usesPrefixDiscriminator&&(h=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[c.property]=c.decode(t,e+h)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,n),c+o.encode(t[o.property],e,n+c)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Ro(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}U.Union=ji;class Ro extends Bt{constructor(t,e,n,s){if(!(t instanceof ji))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Bt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}U.VariantLayout=Ro;function An(r){return 0>r&&(r+=4294967296),r}class Gi extends Bt{constructor(t,e,n){if(!(t instanceof Ue||t instanceof Oe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=An(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Zi(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Lo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}U.BitStructure=Gi;class Zi{constructor(t,e,n){if(!(t instanceof Gi))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=An(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return An(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==An(t&this.valueMask))throw new TypeError($i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=An(t<<this.start);this.container._packedSetValue(An(e&~this.wordMask)|n)}}U.BitField=Zi;let Lo=class extends Zi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};U.Boolean=Lo;class To extends Bt{constructor(t,e){if(!(t instanceof Be&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Be||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),Et(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof Be&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError($i("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Et(t);return Et(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof Be&&this.length.encode(s,e,n),s}}U.Blob=To;class Co extends Bt{constructor(t){super(-1,t)}getSpan(t,e=0){On(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return Et(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ki.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=Et(e);return s.copy(o,n),o[n+i]=0,i+1}}U.CString=Co;class Uo extends Bt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return On(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Et(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Ki.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(Et(e),n),i}}U.UTF8=Uo;class Fo extends Bt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}U.Constant=Fo;U.greedy=(r,t)=>new bo(r,t);var gn=U.offset=(r,t,e)=>new Wi(r,t,e),St=U.u8=r=>new Ue(1,r),Re=U.u16=r=>new Ue(2,r);U.u24=r=>new Ue(3,r);var rt=U.u32=r=>new Ue(4,r);U.u40=r=>new Ue(5,r);U.u48=r=>new Ue(6,r);var fe=U.nu64=r=>new vo(r);U.u16be=r=>new Oe(2,r);U.u24be=r=>new Oe(3,r);U.u32be=r=>new Oe(4,r);U.u40be=r=>new Oe(5,r);U.u48be=r=>new Oe(6,r);U.nu64be=r=>new xo(r);U.s8=r=>new mn(1,r);U.s16=r=>new mn(2,r);U.s24=r=>new mn(3,r);U.s32=r=>new mn(4,r);U.s40=r=>new mn(5,r);U.s48=r=>new mn(6,r);var ke=U.ns64=r=>new Eo(r);U.s16be=r=>new Pn(2,r);U.s24be=r=>new Pn(3,r);U.s32be=r=>new Pn(4,r);U.s40be=r=>new Pn(5,r);U.s48be=r=>new Pn(6,r);U.ns64be=r=>new So(r);U.f32=r=>new Bo(r);U.f32be=r=>new _o(r);U.f64=r=>new Ao(r);U.f64be=r=>new ko(r);var Q=U.struct=(r,t,e)=>new Mo(r,t,e);U.bits=(r,t,e)=>new Gi(r,t,e);var xe=U.seq=(r,t,e)=>new Io(r,t,e);U.union=(r,t,e)=>new ji(r,t,e);U.unionLayoutDiscriminator=(r,t)=>new mr(r,t);var Dt=U.blob=(r,t)=>new To(r,t);U.cstr=r=>new Co(r);U.utf8=(r,t)=>new Uo(r,t);U.constant=(r,t)=>new Fo(r,t);var Wc=8078e3,Vc=8078001,jc=8078004,Gc=8078005,Zc=8078006,Yc=8078011;function No(r){return Array.isArray(r)?"%5B"+r.map(No).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function Xc([r,t]){return`${r}=${No(t)}`}function Jc(r){const t=Object.entries(r).map(Xc).join("&");return btoa(t)}function Qc(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${Jc(t)}'`),`${e}\``}}var Mn=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...c}=e;o&&(s={cause:o}),Object.keys(c).length>0&&(n=c)}const i=Qc(t,n);super(i,s);oe(this,"cause",this.cause);oe(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function tu(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function eu(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(tu(t,r));return r.write(t,e,0),e}})}function nu(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function _n(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function ru(r,t){if(_n(r)!==_n(t))throw new Mn(jc);if(_n(r)&&_n(t)&&r.fixedSize!==t.fixedSize)throw new Mn(Gc,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!_n(r)&&!_n(t)&&r.maxSize!==t.maxSize)throw new Mn(Zc,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function iu(r,t,e=0){if(t.length-e<=0)throw new Mn(Wc,{codecDescription:r})}function su(r,t,e,n=0){const s=e.length-n;if(s<t)throw new Mn(Vc,{bytesLength:s,codecDescription:r,expected:t})}function ou(r,t,e,n){if(n<t||n>e)throw new Mn(Yc,{codecDescription:r,max:e,min:t,value:n})}function Oo(r){return(r==null?void 0:r.endian)!==1}function au(r){return eu({fixedSize:r.size,write(t,e,n){r.range&&ou(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,Oo(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function cu(r){return nu({fixedSize:r.size,read(t,e=0){iu(r.name,t,e),su(r.name,r.size,t,e);const n=new DataView(uu(t,e,r.size));return[r.get(n,Oo(r.config)),e+r.size]}})}function uu(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var fu=(r={})=>au({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),lu=(r={})=>cu({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),hu=(r={})=>ru(fu(r),lu(r));class du extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:c}=t,h=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??h),i!=null&&(this.cause=h),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function pu(r){return Xn(r)&&typeof r[Symbol.iterator]=="function"}function Xn(r){return typeof r=="object"&&r!=null}function wr(r){return Xn(r)&&!Array.isArray(r)}function qe(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function gu(r){const{done:t,value:e}=r.next();return t?void 0:e}function mu(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:h=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${qe(n)}\``}=r;return{value:n,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...r,message:h}}function*_s(r,t,e,n){pu(r)||(r=[r]);for(const s of r){const i=mu(s,t,e,n);i&&(yield i)}}function*Yi(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,c={path:n,branch:s,mask:o};i&&(r=t.coercer(r,c));let h="valid";for(const E of t.validator(r,c))E.explanation=e.message,h="not_valid",yield[E,void 0];for(let[E,S,A]of t.entries(r,c)){const N=Yi(S,A,{path:E===void 0?n:[...n,E],branch:E===void 0?s:[...s,S],coerce:i,mask:o,message:e.message});for(const M of N)M[0]?(h=M[0].refinement!=null?"not_refined":"not_valid",yield[M[0],void 0]):i&&(S=M[1],E===void 0?r=S:r instanceof Map?r.set(E,S):r instanceof Set?r.add(S):Xn(r)&&(S!==void 0||E in r)&&(r[E]=S))}if(h!=="not_valid")for(const E of t.refiner(r,c))E.explanation=e.message,h="not_refined",yield[E,void 0];h==="valid"&&(yield[void 0,r])}let Ve=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=h=>h,entries:c=function*(){}}=t;this.type=e,this.schema=n,this.entries=c,this.coercer=o,s?this.validator=(h,E)=>{const S=s(h,E);return _s(S,E,this,h)}:this.validator=()=>[],i?this.refiner=(h,E)=>{const S=i(h,E);return _s(S,E,this,h)}:this.refiner=()=>[]}assert(t,e){return wu(t,this,e)}create(t,e){return j(t,this,e)}is(t){return Po(t,this)}mask(t,e){return yu(t,this,e)}validate(t,e={}){return Jn(t,this,e)}};function wu(r,t,e){const n=Jn(r,t,{message:e});if(n[0])throw n[0]}function j(r,t,e){const n=Jn(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function yu(r,t,e){const n=Jn(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Po(r,t){return!Jn(r,t)[0]}function Jn(r,t,e={}){const n=Yi(r,t,e),s=gu(n);return s[0]?[new du(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function wn(r,t){return new Ve({type:r,schema:null,validator:t})}function bu(){return wn("any",()=>!0)}function Z(r){return new Ve({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${qe(t)}`}})}function Ke(){return wn("boolean",r=>typeof r=="boolean")}function Xi(r){return wn("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${qe(t)}`)}function Ft(r){const t=qe(r),e=typeof r;return new Ve({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${qe(n)}`}})}function vu(){return wn("never",()=>!1)}function Y(r){return new Ve({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function L(){return wn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${qe(r)}`)}function st(r){return new Ve({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function qo(r,t){return new Ve({type:"record",schema:null,*entries(e){if(Xn(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return wr(e)||`Expected an object, but received: ${qe(e)}`},coercer(e){return wr(e)?{...e}:e}})}function K(){return wn("string",r=>typeof r=="string"||`Expected a string, but received: ${qe(r)}`)}function Ji(r){const t=vu();return new Ve({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${qe(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function D(r){const t=Object.keys(r);return new Ve({type:"type",schema:r,*entries(e){if(Xn(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return wr(e)||`Expected an object, but received: ${qe(e)}`},coercer(e){return wr(e)?{...e}:e}})}function Ee(r){const t=r.map(e=>e.type).join(" | ");return new Ve({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Yi(e,i,n),[c]=o;if(c[0])for(const[h]of o)h&&s.push(h);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${qe(e)}`,...s]}})}function qn(){return wn("unknown",()=>!0)}function Qn(r,t,e){return new Ve({...r,coercer:(n,s)=>Po(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var sr,xu=new Uint8Array(16);function Do(){if(!sr&&(sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sr(xu)}const Eu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kr(r){return typeof r=="string"&&Eu.test(r)}var ue=[];for(var ci=0;ci<256;++ci)ue.push((ci+256).toString(16).substr(1));function Ir(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ue[r[t+0]]+ue[r[t+1]]+ue[r[t+2]]+ue[r[t+3]]+"-"+ue[r[t+4]]+ue[r[t+5]]+"-"+ue[r[t+6]]+ue[r[t+7]]+"-"+ue[r[t+8]]+ue[r[t+9]]+"-"+ue[r[t+10]]+ue[r[t+11]]+ue[r[t+12]]+ue[r[t+13]]+ue[r[t+14]]+ue[r[t+15]]).toLowerCase();if(!kr(e))throw TypeError("Stringified UUID is invalid");return e}var As,ui,fi=0,li=0;function Su(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||As,o=r.clockseq!==void 0?r.clockseq:ui;if(i==null||o==null){var c=r.random||(r.rng||Do)();i==null&&(i=As=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=ui=(c[6]<<8|c[7])&16383)}var h=r.msecs!==void 0?r.msecs:Date.now(),E=r.nsecs!==void 0?r.nsecs:li+1,S=h-fi+(E-li)/1e4;if(S<0&&r.clockseq===void 0&&(o=o+1&16383),(S<0||h>fi)&&r.nsecs===void 0&&(E=0),E>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fi=h,li=E,ui=o,h+=122192928e5;var A=((h&268435455)*1e4+E)%4294967296;s[n++]=A>>>24&255,s[n++]=A>>>16&255,s[n++]=A>>>8&255,s[n++]=A&255;var N=h/4294967296*1e4&268435455;s[n++]=N>>>8&255,s[n++]=N&255,s[n++]=N>>>24&15|16,s[n++]=N>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var M=0;M<6;++M)s[n+M]=i[M];return t||Ir(s)}function zo(r){if(!kr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Bu(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var _u="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Au="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ho(r,t,e){function n(s,i,o,c){if(typeof s=="string"&&(s=Bu(s)),typeof i=="string"&&(i=zo(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var h=new Uint8Array(16+s.length);if(h.set(i),h.set(s,i.length),h=e(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,o){c=c||0;for(var E=0;E<16;++E)o[c+E]=h[E];return o}return Ir(h)}try{n.name=r}catch{}return n.DNS=_u,n.URL=Au,n}function ku(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Iu(Mu(Ru(r),r.length*8))}function Iu(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Ko(r){return(r+64>>>9<<4)+14+1}function Mu(r,t){r[t>>5]|=128<<t%32,r[Ko(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var c=e,h=n,E=s,S=i;e=ge(e,n,s,i,r[o],7,-680876936),i=ge(i,e,n,s,r[o+1],12,-389564586),s=ge(s,i,e,n,r[o+2],17,606105819),n=ge(n,s,i,e,r[o+3],22,-1044525330),e=ge(e,n,s,i,r[o+4],7,-176418897),i=ge(i,e,n,s,r[o+5],12,1200080426),s=ge(s,i,e,n,r[o+6],17,-1473231341),n=ge(n,s,i,e,r[o+7],22,-45705983),e=ge(e,n,s,i,r[o+8],7,1770035416),i=ge(i,e,n,s,r[o+9],12,-1958414417),s=ge(s,i,e,n,r[o+10],17,-42063),n=ge(n,s,i,e,r[o+11],22,-1990404162),e=ge(e,n,s,i,r[o+12],7,1804603682),i=ge(i,e,n,s,r[o+13],12,-40341101),s=ge(s,i,e,n,r[o+14],17,-1502002290),n=ge(n,s,i,e,r[o+15],22,1236535329),e=me(e,n,s,i,r[o+1],5,-165796510),i=me(i,e,n,s,r[o+6],9,-1069501632),s=me(s,i,e,n,r[o+11],14,643717713),n=me(n,s,i,e,r[o],20,-373897302),e=me(e,n,s,i,r[o+5],5,-701558691),i=me(i,e,n,s,r[o+10],9,38016083),s=me(s,i,e,n,r[o+15],14,-660478335),n=me(n,s,i,e,r[o+4],20,-405537848),e=me(e,n,s,i,r[o+9],5,568446438),i=me(i,e,n,s,r[o+14],9,-1019803690),s=me(s,i,e,n,r[o+3],14,-187363961),n=me(n,s,i,e,r[o+8],20,1163531501),e=me(e,n,s,i,r[o+13],5,-1444681467),i=me(i,e,n,s,r[o+2],9,-51403784),s=me(s,i,e,n,r[o+7],14,1735328473),n=me(n,s,i,e,r[o+12],20,-1926607734),e=we(e,n,s,i,r[o+5],4,-378558),i=we(i,e,n,s,r[o+8],11,-2022574463),s=we(s,i,e,n,r[o+11],16,1839030562),n=we(n,s,i,e,r[o+14],23,-35309556),e=we(e,n,s,i,r[o+1],4,-1530992060),i=we(i,e,n,s,r[o+4],11,1272893353),s=we(s,i,e,n,r[o+7],16,-155497632),n=we(n,s,i,e,r[o+10],23,-1094730640),e=we(e,n,s,i,r[o+13],4,681279174),i=we(i,e,n,s,r[o],11,-358537222),s=we(s,i,e,n,r[o+3],16,-722521979),n=we(n,s,i,e,r[o+6],23,76029189),e=we(e,n,s,i,r[o+9],4,-640364487),i=we(i,e,n,s,r[o+12],11,-421815835),s=we(s,i,e,n,r[o+15],16,530742520),n=we(n,s,i,e,r[o+2],23,-995338651),e=ye(e,n,s,i,r[o],6,-198630844),i=ye(i,e,n,s,r[o+7],10,1126891415),s=ye(s,i,e,n,r[o+14],15,-1416354905),n=ye(n,s,i,e,r[o+5],21,-57434055),e=ye(e,n,s,i,r[o+12],6,1700485571),i=ye(i,e,n,s,r[o+3],10,-1894986606),s=ye(s,i,e,n,r[o+10],15,-1051523),n=ye(n,s,i,e,r[o+1],21,-2054922799),e=ye(e,n,s,i,r[o+8],6,1873313359),i=ye(i,e,n,s,r[o+15],10,-30611744),s=ye(s,i,e,n,r[o+6],15,-1560198380),n=ye(n,s,i,e,r[o+13],21,1309151649),e=ye(e,n,s,i,r[o+4],6,-145523070),i=ye(i,e,n,s,r[o+11],10,-1120210379),s=ye(s,i,e,n,r[o+2],15,718787259),n=ye(n,s,i,e,r[o+9],21,-343485551),e=an(e,c),n=an(n,h),s=an(s,E),i=an(i,S)}return[e,n,s,i]}function Ru(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Ko(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function an(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Lu(r,t){return r<<t|r>>>32-t}function Mr(r,t,e,n,s,i){return an(Lu(an(an(t,r),an(n,i)),s),e)}function ge(r,t,e,n,s,i,o){return Mr(t&e|~t&n,r,t,s,i,o)}function me(r,t,e,n,s,i,o){return Mr(t&n|e&~n,r,t,s,i,o)}function we(r,t,e,n,s,i,o){return Mr(t^e^n,r,t,s,i,o)}function ye(r,t,e,n,s,i,o){return Mr(e^(t|~n),r,t,s,i,o)}var Tu=Ho("v3",48,ku);function Cu(r,t,e){r=r||{};var n=r.random||(r.rng||Do)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Ir(n)}function Uu(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function hi(r,t){return r<<t|r>>>32-t}function Fu(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),c=new Array(o),h=0;h<o;++h){for(var E=new Uint32Array(16),S=0;S<16;++S)E[S]=r[h*64+S*4]<<24|r[h*64+S*4+1]<<16|r[h*64+S*4+2]<<8|r[h*64+S*4+3];c[h]=E}c[o-1][14]=(r.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(r.length-1)*8&4294967295;for(var A=0;A<o;++A){for(var N=new Uint32Array(80),M=0;M<16;++M)N[M]=c[A][M];for(var T=16;T<80;++T)N[T]=hi(N[T-3]^N[T-8]^N[T-14]^N[T-16],1);for(var I=e[0],F=e[1],z=e[2],J=e[3],P=e[4],C=0;C<80;++C){var q=Math.floor(C/20),W=hi(I,5)+Uu(q,F,z,J)+P+t[q]+N[C]>>>0;P=J,J=z,z=hi(F,30)>>>0,F=I,I=W}e[0]=e[0]+I>>>0,e[1]=e[1]+F>>>0,e[2]=e[2]+z>>>0,e[3]=e[3]+J>>>0,e[4]=e[4]+P>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Nu=Ho("v5",80,Fu);const Ou="00000000-0000-0000-0000-000000000000";function Pu(r){if(!kr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const qu=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ou,parse:zo,stringify:Ir,v1:Su,v3:Tu,v4:Cu,v5:Nu,validate:kr,version:Pu},Symbol.toStringTag,{value:"Module"})),$o=Ri(qu),Du=$o.v4,zu=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return Du()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var Hu=zu;const Ku=$o.v4,$u=Hu,$n=function(r,t){if(!(this instanceof $n))return new $n(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Ku()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var Wu=$n;$n.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const E=typeof n=="function";try{i=$u(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(E)return n(S);throw S}if(!E)return i}let h;try{h=JSON.stringify(i,this.options.replacer)}catch(E){return n(E)}return this.callServer(h,function(E,S){s._parseResponse(E,S,n)}),i};$n.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};const Vu=xr(Wu);var Wo={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(h,E,S){this.fn=h,this.context=E,this.once=S||!1}function i(h,E,S,A,N){if(typeof S!="function")throw new TypeError("The listener must be a function");var M=new s(S,A||h,N),T=e?e+E:E;return h._events[T]?h._events[T].fn?h._events[T]=[h._events[T],M]:h._events[T].push(M):(h._events[T]=M,h._eventsCount++),h}function o(h,E){--h._eventsCount===0?h._events=new n:delete h._events[E]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var E=[],S,A;if(this._eventsCount===0)return E;for(A in S=this._events)t.call(S,A)&&E.push(e?A.slice(1):A);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(S)):E},c.prototype.listeners=function(E){var S=e?e+E:E,A=this._events[S];if(!A)return[];if(A.fn)return[A.fn];for(var N=0,M=A.length,T=new Array(M);N<M;N++)T[N]=A[N].fn;return T},c.prototype.listenerCount=function(E){var S=e?e+E:E,A=this._events[S];return A?A.fn?1:A.length:0},c.prototype.emit=function(E,S,A,N,M,T){var I=e?e+E:E;if(!this._events[I])return!1;var F=this._events[I],z=arguments.length,J,P;if(F.fn){switch(F.once&&this.removeListener(E,F.fn,void 0,!0),z){case 1:return F.fn.call(F.context),!0;case 2:return F.fn.call(F.context,S),!0;case 3:return F.fn.call(F.context,S,A),!0;case 4:return F.fn.call(F.context,S,A,N),!0;case 5:return F.fn.call(F.context,S,A,N,M),!0;case 6:return F.fn.call(F.context,S,A,N,M,T),!0}for(P=1,J=new Array(z-1);P<z;P++)J[P-1]=arguments[P];F.fn.apply(F.context,J)}else{var C=F.length,q;for(P=0;P<C;P++)switch(F[P].once&&this.removeListener(E,F[P].fn,void 0,!0),z){case 1:F[P].fn.call(F[P].context);break;case 2:F[P].fn.call(F[P].context,S);break;case 3:F[P].fn.call(F[P].context,S,A);break;case 4:F[P].fn.call(F[P].context,S,A,N);break;default:if(!J)for(q=1,J=new Array(z-1);q<z;q++)J[q-1]=arguments[q];F[P].fn.apply(F[P].context,J)}}return!0},c.prototype.on=function(E,S,A){return i(this,E,S,A,!1)},c.prototype.once=function(E,S,A){return i(this,E,S,A,!0)},c.prototype.removeListener=function(E,S,A,N){var M=e?e+E:E;if(!this._events[M])return this;if(!S)return o(this,M),this;var T=this._events[M];if(T.fn)T.fn===S&&(!N||T.once)&&(!A||T.context===A)&&o(this,M);else{for(var I=0,F=[],z=T.length;I<z;I++)(T[I].fn!==S||N&&!T[I].once||A&&T[I].context!==A)&&F.push(T[I]);F.length?this._events[M]=F.length===1?F[0]:F:o(this,M)}return this},c.prototype.removeAllListeners=function(E){var S;return E?(S=e?e+E:E,this._events[S]&&o(this,S)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,r.exports=c})(Wo);var ju=Wo.exports;const Vo=xr(ju);var Gu=class extends Vo{constructor(t,e,n){super();oe(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function Zu(r,t){return new Gu(r,t)}var Yu=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Xu=class extends Vo{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...c}={},h,E){super();oe(this,"address");oe(this,"rpc_id");oe(this,"queue");oe(this,"options");oe(this,"autoconnect");oe(this,"ready");oe(this,"reconnect");oe(this,"reconnect_timer_id");oe(this,"reconnect_interval");oe(this,"max_reconnects");oe(this,"rest_options");oe(this,"current_reconnects");oe(this,"generate_request_id");oe(this,"socket");oe(this,"webSocketFactory");oe(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=h||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),E?this.dataPack=E:this.dataPack=new Yu,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),h={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(h),s,E=>{if(E)return o(E);this.queue[c]={promise:[i,o]},n&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=gt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class jo extends Ks{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Aa(t);const n=Ti(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ln(i)}update(t){return cr(this),this.iHash.update(t),this}digestInto(t){cr(this),Vn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Go=(r,t,e)=>new jo(r,t).update(e).digest();Go.create=(r,t)=>new jo(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ks(r){r.lowS!==void 0&&cn("lowS",r.lowS),r.prehash!==void 0&&cn("prehash",r.prehash)}function Ju(r){const t=Oi(r);Zn(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class Qu extends Error{constructor(t=""){super(t)}}const Ze={Err:Qu,_tlv:{encode:(r,t)=>{const{Err:e}=Ze;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=rr(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?rr(s.length/2|128):"";return rr(r)+i+s+t},decode(r,t){const{Err:e}=Ze;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const h=s&127;if(!h)throw new e("tlv.decode(long): indefinite length not supported");if(h>4)throw new e("tlv.decode(long): byte length is too big");const E=t.subarray(n,n+h);if(E.length!==h)throw new e("tlv.decode: length bytes not complete");if(E[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const S of E)o=o<<8|S;if(n+=h,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(n,n+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=Ze;if(r<Xe)throw new t("integer: negative integers are not allowed");let e=rr(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=Ze;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return pn(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=Ze,s=Ht("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:h}=n.decode(2,i),{v:E,l:S}=n.decode(2,h);if(S.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(E)}},hexFromSig(r){const{_tlv:t,_int:e}=Ze,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}};function di(r,t){return Tn(Gn(r,t))}const Xe=BigInt(0),ce=BigInt(1);BigInt(2);const pi=BigInt(3),tf=BigInt(4);function ef(r){const t=Ju(r),{Fp:e}=t,n=Yn(t.n,t.nBitLength),s=t.toBytes||((P,C,q)=>{const W=C.toAffine();return Cn(Uint8Array.from([4]),e.toBytes(W.x),e.toBytes(W.y))}),i=t.fromBytes||(P=>{const C=P.subarray(1),q=e.fromBytes(C.subarray(0,e.BYTES)),W=e.fromBytes(C.subarray(e.BYTES,2*e.BYTES));return{x:q,y:W}});function o(P){const{a:C,b:q}=t,W=e.sqr(P),X=e.mul(W,P);return e.add(e.add(X,e.mul(P,C)),q)}function c(P,C){const q=e.sqr(C),W=o(P);return e.eql(q,W)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const h=e.mul(e.pow(t.a,pi),tf),E=e.mul(e.sqr(t.b),BigInt(27));if(e.is0(e.add(h,E)))throw new Error("bad curve params: a or b");function S(P){return Fi(P,ce,t.n)}function A(P){const{allowedPrivateKeyLengths:C,nByteLength:q,wrapPrivateKey:W,n:X}=t;if(C&&typeof P!="bigint"){if(jn(P)&&(P=Tn(P)),typeof P!="string"||!C.includes(P.length))throw new Error("invalid private key");P=P.padStart(q*2,"0")}let et;try{et=typeof P=="bigint"?P:pn(Ht("private key",P,q))}catch{throw new Error("invalid private key, expected hex or "+q+" bytes, got "+typeof P)}return W&&(et=Ct(et,X)),Ne("private key",et,ce,X),et}function N(P){if(!(P instanceof I))throw new Error("ProjectivePoint expected")}const M=lr((P,C)=>{const{px:q,py:W,pz:X}=P;if(e.eql(X,e.ONE))return{x:q,y:W};const et=P.is0();C==null&&(C=et?e.ONE:e.inv(X));const ft=e.mul(q,C),ht=e.mul(W,C),G=e.mul(X,C);if(et)return{x:e.ZERO,y:e.ZERO};if(!e.eql(G,e.ONE))throw new Error("invZ was invalid");return{x:ft,y:ht}}),T=lr(P=>{if(P.is0()){if(t.allowInfinityPoint&&!e.is0(P.py))return;throw new Error("bad point: ZERO")}const{x:C,y:q}=P.toAffine();if(!e.isValid(C)||!e.isValid(q))throw new Error("bad point: x or y not FE");if(!c(C,q))throw new Error("bad point: equation left != right");if(!P.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(C,q,W){if(C==null||!e.isValid(C))throw new Error("x required");if(q==null||!e.isValid(q)||e.is0(q))throw new Error("y required");if(W==null||!e.isValid(W))throw new Error("z required");this.px=C,this.py=q,this.pz=W,Object.freeze(this)}static fromAffine(C){const{x:q,y:W}=C||{};if(!C||!e.isValid(q)||!e.isValid(W))throw new Error("invalid affine point");if(C instanceof I)throw new Error("projective point not allowed");const X=et=>e.eql(et,e.ZERO);return X(q)&&X(W)?I.ZERO:new I(q,W,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){const q=Ni(e,C.map(W=>W.pz));return C.map((W,X)=>W.toAffine(q[X])).map(I.fromAffine)}static fromHex(C){const q=I.fromAffine(i(Ht("pointHex",C)));return q.assertValidity(),q}static fromPrivateKey(C){return I.BASE.multiply(A(C))}static msm(C,q){return ao(I,n,C,q)}_setWindowSize(C){J.setWindowSize(this,C)}assertValidity(){T(this)}hasEvenY(){const{y:C}=this.toAffine();if(e.isOdd)return!e.isOdd(C);throw new Error("Field doesn't support isOdd")}equals(C){N(C);const{px:q,py:W,pz:X}=this,{px:et,py:ft,pz:ht}=C,G=e.eql(e.mul(q,ht),e.mul(et,X)),it=e.eql(e.mul(W,ht),e.mul(ft,X));return G&&it}negate(){return new I(this.px,e.neg(this.py),this.pz)}double(){const{a:C,b:q}=t,W=e.mul(q,pi),{px:X,py:et,pz:ft}=this;let ht=e.ZERO,G=e.ZERO,it=e.ZERO,B=e.mul(X,X),a=e.mul(et,et),d=e.mul(ft,ft),p=e.mul(X,et);return p=e.add(p,p),it=e.mul(X,ft),it=e.add(it,it),ht=e.mul(C,it),G=e.mul(W,d),G=e.add(ht,G),ht=e.sub(a,G),G=e.add(a,G),G=e.mul(ht,G),ht=e.mul(p,ht),it=e.mul(W,it),d=e.mul(C,d),p=e.sub(B,d),p=e.mul(C,p),p=e.add(p,it),it=e.add(B,B),B=e.add(it,B),B=e.add(B,d),B=e.mul(B,p),G=e.add(G,B),d=e.mul(et,ft),d=e.add(d,d),B=e.mul(d,p),ht=e.sub(ht,B),it=e.mul(d,a),it=e.add(it,it),it=e.add(it,it),new I(ht,G,it)}add(C){N(C);const{px:q,py:W,pz:X}=this,{px:et,py:ft,pz:ht}=C;let G=e.ZERO,it=e.ZERO,B=e.ZERO;const a=t.a,d=e.mul(t.b,pi);let p=e.mul(q,et),b=e.mul(W,ft),w=e.mul(X,ht),y=e.add(q,W),_=e.add(et,ft);y=e.mul(y,_),_=e.add(p,b),y=e.sub(y,_),_=e.add(q,X);let m=e.add(et,ht);return _=e.mul(_,m),m=e.add(p,w),_=e.sub(_,m),m=e.add(W,X),G=e.add(ft,ht),m=e.mul(m,G),G=e.add(b,w),m=e.sub(m,G),B=e.mul(a,_),G=e.mul(d,w),B=e.add(G,B),G=e.sub(b,B),B=e.add(b,B),it=e.mul(G,B),b=e.add(p,p),b=e.add(b,p),w=e.mul(a,w),_=e.mul(d,_),b=e.add(b,w),w=e.sub(p,w),w=e.mul(a,w),_=e.add(_,w),p=e.mul(b,_),it=e.add(it,p),p=e.mul(m,_),G=e.mul(y,G),G=e.sub(G,p),p=e.mul(y,b),B=e.mul(m,B),B=e.add(B,p),new I(G,it,B)}subtract(C){return this.add(C.negate())}is0(){return this.equals(I.ZERO)}wNAF(C){return J.wNAFCached(this,C,I.normalizeZ)}multiplyUnsafe(C){const{endo:q,n:W}=t;Ne("scalar",C,Xe,W);const X=I.ZERO;if(C===Xe)return X;if(this.is0()||C===ce)return this;if(!q||J.hasPrecomputes(this))return J.wNAFCachedUnsafe(this,C,I.normalizeZ);let{k1neg:et,k1:ft,k2neg:ht,k2:G}=q.splitScalar(C),it=X,B=X,a=this;for(;ft>Xe||G>Xe;)ft&ce&&(it=it.add(a)),G&ce&&(B=B.add(a)),a=a.double(),ft>>=ce,G>>=ce;return et&&(it=it.negate()),ht&&(B=B.negate()),B=new I(e.mul(B.px,q.beta),B.py,B.pz),it.add(B)}multiply(C){const{endo:q,n:W}=t;Ne("scalar",C,ce,W);let X,et;if(q){const{k1neg:ft,k1:ht,k2neg:G,k2:it}=q.splitScalar(C);let{p:B,f:a}=this.wNAF(ht),{p:d,f:p}=this.wNAF(it);B=J.constTimeNegate(ft,B),d=J.constTimeNegate(G,d),d=new I(e.mul(d.px,q.beta),d.py,d.pz),X=B.add(d),et=a.add(p)}else{const{p:ft,f:ht}=this.wNAF(C);X=ft,et=ht}return I.normalizeZ([X,et])[0]}multiplyAndAddUnsafe(C,q,W){const X=I.BASE,et=(ht,G)=>G===Xe||G===ce||!ht.equals(X)?ht.multiplyUnsafe(G):ht.multiply(G),ft=et(this,q).add(et(C,W));return ft.is0()?void 0:ft}toAffine(C){return M(this,C)}isTorsionFree(){const{h:C,isTorsionFree:q}=t;if(C===ce)return!0;if(q)return q(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:C,clearCofactor:q}=t;return C===ce?this:q?q(I,this):this.multiplyUnsafe(t.h)}toRawBytes(C=!0){return cn("isCompressed",C),this.assertValidity(),s(I,this,C)}toHex(C=!0){return cn("isCompressed",C),Tn(this.toRawBytes(C))}}I.BASE=new I(t.Gx,t.Gy,e.ONE),I.ZERO=new I(e.ZERO,e.ONE,e.ZERO);const{endo:F,nBitLength:z}=t,J=oo(I,F?Math.ceil(z/2):z);return{CURVE:t,ProjectivePoint:I,normPrivateKeyToScalar:A,weierstrassEquation:o,isWithinCurveOrder:S}}function nf(r){const t=Oi(r);return Zn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function rf(r){const t=nf(r),{Fp:e,n,nByteLength:s,nBitLength:i}=t,o=e.BYTES+1,c=2*e.BYTES+1;function h(d){return Ct(d,n)}function E(d){return xi(d,n)}const{ProjectivePoint:S,normPrivateKeyToScalar:A,weierstrassEquation:N,isWithinCurveOrder:M}=ef({...t,toBytes(d,p,b){const w=p.toAffine(),y=e.toBytes(w.x),_=Cn;return cn("isCompressed",b),b?_(Uint8Array.from([p.hasEvenY()?2:3]),y):_(Uint8Array.from([4]),y,e.toBytes(w.y))},fromBytes(d){const p=d.length,b=d[0],w=d.subarray(1);if(p===o&&(b===2||b===3)){const y=pn(w);if(!Fi(y,ce,e.ORDER))throw new Error("Point is not on curve");const _=N(y);let m;try{m=e.sqrt(_)}catch($){const H=$ instanceof Error?": "+$.message:"";throw new Error("Point is not on curve"+H)}const f=(m&ce)===ce;return(b&1)===1!==f&&(m=e.neg(m)),{x:y,y:m}}else if(p===c&&b===4){const y=e.fromBytes(w.subarray(0,e.BYTES)),_=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:y,y:_}}else{const y=o,_=c;throw new Error("invalid Point, expected length of "+y+", or uncompressed "+_+", got "+p)}}});function T(d){const p=n>>ce;return d>p}function I(d){return T(d)?h(-d):d}const F=(d,p,b)=>pn(d.slice(p,b));class z{constructor(p,b,w){Ne("r",p,ce,n),Ne("s",b,ce,n),this.r=p,this.s=b,w!=null&&(this.recovery=w),Object.freeze(this)}static fromCompact(p){const b=s;return p=Ht("compactSignature",p,b*2),new z(F(p,0,b),F(p,b,2*b))}static fromDER(p){const{r:b,s:w}=Ze.toSig(Ht("DER",p));return new z(b,w)}assertValidity(){}addRecoveryBit(p){return new z(this.r,this.s,p)}recoverPublicKey(p){const{r:b,s:w,recovery:y}=this,_=X(Ht("msgHash",p));if(y==null||![0,1,2,3].includes(y))throw new Error("recovery id invalid");const m=y===2||y===3?b+t.n:b;if(m>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=y&1?"03":"02",x=S.fromHex(f+di(m,e.BYTES)),$=E(m),H=h(-_*$),V=h(w*$),ot=S.BASE.multiplyAndAddUnsafe(x,H,V);if(!ot)throw new Error("point at infinify");return ot.assertValidity(),ot}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new z(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return ur(this.toDERHex())}toDERHex(){return Ze.hexFromSig(this)}toCompactRawBytes(){return ur(this.toCompactHex())}toCompactHex(){const p=s;return di(this.r,p)+di(this.s,p)}}const J={isValidPrivateKey(d){try{return A(d),!0}catch{return!1}},normPrivateKeyToScalar:A,randomPrivateKey:()=>{const d=ro(t.n);return sc(t.randomBytes(d),t.n)},precompute(d=8,p=S.BASE){return p._setWindowSize(d),p.multiply(BigInt(3)),p}};function P(d,p=!0){return S.fromPrivateKey(d).toRawBytes(p)}function C(d){if(typeof d=="bigint")return!1;if(d instanceof S)return!0;const b=Ht("key",d).length,w=e.BYTES,y=w+1,_=2*w+1;if(!(t.allowedPrivateKeyLengths||s===y))return b===y||b===_}function q(d,p,b=!0){if(C(d)===!0)throw new Error("first arg must be private key");if(C(p)===!1)throw new Error("second arg must be public key");return S.fromHex(p).multiply(A(d)).toRawBytes(b)}const W=t.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const p=pn(d),b=d.length*8-i;return b>0?p>>BigInt(b):p},X=t.bits2int_modN||function(d){return h(W(d))},et=Sr(i);function ft(d){return Ne("num < 2^"+i,d,Xe,et),Gn(d,s)}function ht(d,p,b=G){if(["recovered","canonical"].some(at=>at in b))throw new Error("sign() legacy options not supported");const{hash:w,randomBytes:y}=t;let{lowS:_,prehash:m,extraEntropy:f}=b;_==null&&(_=!0),d=Ht("msgHash",d),ks(b),m&&(d=Ht("prehashed msgHash",w(d)));const x=X(d),$=A(p),H=[ft($),ft(x)];if(f!=null&&f!==!1){const at=f===!0?y(e.BYTES):f;H.push(Ht("extraEntropy",at))}const V=Cn(...H),ot=x;function nt(at){const Ut=W(at);if(!M(Ut))return;const bt=E(Ut),pt=S.BASE.multiply(Ut).toAffine(),kt=h(pt.x);if(kt===Xe)return;const mt=h(bt*h(ot+kt*$));if(mt===Xe)return;let xt=(pt.x===kt?0:2)|Number(pt.y&ce),Se=mt;return _&&T(mt)&&(Se=I(mt),xt^=1),new z(kt,Se,xt)}return{seed:V,k2sig:nt}}const G={lowS:t.lowS,prehash:!1},it={lowS:t.lowS,prehash:!1};function B(d,p,b=G){const{seed:w,k2sig:y}=ht(d,p,b),_=t;return Za(_.hash.outputLen,_.nByteLength,_.hmac)(w,y)}S.BASE._setWindowSize(8);function a(d,p,b,w=it){var xt;const y=d;p=Ht("msgHash",p),b=Ht("publicKey",b);const{lowS:_,prehash:m,format:f}=w;if(ks(w),"strict"in w)throw new Error("options.strict was renamed to lowS");if(f!==void 0&&f!=="compact"&&f!=="der")throw new Error("format must be compact or der");const x=typeof y=="string"||jn(y),$=!x&&!f&&typeof y=="object"&&y!==null&&typeof y.r=="bigint"&&typeof y.s=="bigint";if(!x&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,V;try{if($&&(H=new z(y.r,y.s)),x){try{f!=="compact"&&(H=z.fromDER(y))}catch(Se){if(!(Se instanceof Ze.Err))throw Se}!H&&f!=="der"&&(H=z.fromCompact(y))}V=S.fromHex(b)}catch{return!1}if(!H||_&&H.hasHighS())return!1;m&&(p=t.hash(p));const{r:ot,s:nt}=H,at=X(p),Ut=E(nt),bt=h(at*Ut),pt=h(ot*Ut),kt=(xt=S.BASE.multiplyAndAddUnsafe(V,bt,pt))==null?void 0:xt.toAffine();return kt?h(kt.x)===ot:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:q,sign:B,verify:a,ProjectivePoint:S,Signature:z,utils:J}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function sf(r){return{hash:r,hmac:(t,...e)=>Go(r,t,Ma(...e)),randomBytes:Ws}}function of(r,t){const e=n=>rf({...r,...sf(n)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Is=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),af=BigInt(0),cf=BigInt(1),_i=BigInt(2),Ms=(r,t)=>(r+t/_i)/t;function uf(r){const t=Zo,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),h=BigInt(88),E=r*r*r%t,S=E*E*r%t,A=qt(S,e,t)*S%t,N=qt(A,e,t)*S%t,M=qt(N,_i,t)*E%t,T=qt(M,s,t)*M%t,I=qt(T,i,t)*T%t,F=qt(I,c,t)*I%t,z=qt(F,h,t)*F%t,J=qt(z,c,t)*I%t,P=qt(J,e,t)*S%t,C=qt(P,o,t)*T%t,q=qt(C,n,t)*E%t,W=qt(q,_i,t);if(!Ai.eql(Ai.sqr(W),r))throw new Error("Cannot find square root");return W}const Ai=Yn(Zo,void 0,void 0,{sqrt:uf}),ff=of({a:af,b:BigInt(7),Fp:Ai,n:Is,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Is,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-cf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),c=Ms(i*r,t),h=Ms(-n*r,t);let E=Ct(r-c*e-h*s,t),S=Ct(-c*n-h*i,t);const A=E>o,N=S>o;if(A&&(E=t-E),N&&(S=t-S),E>o||S>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:A,k1:E,k2neg:N,k2:S}}}},Gs);function Rs(r){try{return qi.ExtendedPoint.fromHex(r),!0}catch{return!1}}const lf=(r,t)=>qi.sign(r,t.slice(0,32)),hf=qi.verify,Fn=r=>gt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?gt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):gt.Buffer.from(r);class df{constructor(t){Object.assign(this,t)}encode(){return gt.Buffer.from(wo(ar,this))}static decode(t){return yo(ar,this,t)}static decodeUnchecked(t){return lo(ar,this,t)}}const ar=new Map;var Yo;const pf=32,un=32;function gf(r){return r._bn!==void 0}let Ls=1;class ct extends df{constructor(t){if(super({}),this._bn=void 0,gf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=he.decode(t);if(e.length!=un)throw new Error("Invalid public key input");this._bn=new Ss(e)}else this._bn=new Ss(t);if(this._bn.byteLength()>un)throw new Error("Invalid public key input")}}static unique(){const t=new ct(Ls);return Ls+=1,new ct(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return he.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(gt.Buffer);if(t.length===un)return t;const e=gt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=gt.Buffer.concat([t.toBuffer(),gt.Buffer.from(e),n.toBuffer()]),i=Bs(s);return new ct(i)}static createProgramAddressSync(t,e){let n=gt.Buffer.alloc(0);t.forEach(function(i){if(i.length>pf)throw new TypeError("Max seed length exceeded");n=gt.Buffer.concat([n,Fn(i)])}),n=gt.Buffer.concat([n,e.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=Bs(n);if(Rs(s))throw new Error("Invalid seeds, address must fall off the curve");return new ct(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(gt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ct(t);return Rs(e.toBytes())}}Yo=ct;ct.default=new Yo("11111111111111111111111111111111");ar.set(ct,{kind:"struct",fields:[["_bn","u256"]]});new ct("BPFLoader1111111111111111111111111111111111");const Rn=1232,Xo=127,Jo=64;class Qo extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Qo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ta extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ta.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Hn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Hn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class yr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const vt=(r="publicKey")=>Dt(32,r),In=(r="string")=>{const t=Q([rt("length"),rt("lengthPadding"),Dt(gn(rt(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const h={chars:gt.Buffer.from(i,"utf8")};return n(h,o,c)},s.alloc=i=>rt().span+rt().span+gt.Buffer.from(i,"utf8").length,s},mf=(r="authorized")=>Q([vt("staker"),vt("withdrawer")],r),wf=(r="lockup")=>Q([ke("unixTimestamp"),ke("epoch"),vt("custodian")],r),yf=(r="voteInit")=>Q([vt("nodePubkey"),vt("authorizedVoter"),vt("authorizedWithdrawer"),St("commission")],r),bf=(r="voteAuthorizeWithSeedArgs")=>Q([rt("voteAuthorizationType"),vt("currentAuthorityDerivedKeyOwnerPubkey"),In("currentAuthorityDerivedKeySeed"),vt("newAuthorized")],r);function Le(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Te(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function ae(r,t){if(!r)throw new Error(t||"Assertion failed")}class Rr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const c=o.toBase58();let h=n.get(c);return h===void 0&&(h={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,h)),h},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const h=s(c.pubkey);h.isSigner||(h.isSigner=c.isSigner),h.isWritable||(h.isWritable=c.isWritable)}}return new Rr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ae(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,h])=>h.isSigner&&h.isWritable),n=t.filter(([,h])=>h.isSigner&&!h.isWritable),s=t.filter(([,h])=>!h.isSigner&&h.isWritable),i=t.filter(([,h])=>!h.isSigner&&!h.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{ae(e.length>0,"Expected at least one writable signer key");const[h]=e[0];ae(h===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([h])=>new ct(h)),...n.map(([h])=>new ct(h)),...s.map(([h])=>new ct(h)),...i.map(([h])=>new ct(h))];return[o,c]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new ct(i),h=t.findIndex(E=>E.equals(c));h>=0&&(ae(h<256,"Max lookup table index exceeded"),n.push(h),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const ea="Reached end of buffer unexpectedly";function Je(r){if(r.length===0)throw new Error(ea);return r.shift()}function Ce(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(ea);return r.splice(...t)}class fn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ct(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:he.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new yr(this.staticAccountKeys)}static compile(t){const e=Rr.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new yr(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:he.encode(c.data)}));return new fn({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Te(e,t);const n=this.instructions.map(A=>{const{accounts:N,programIdIndex:M}=A,T=Array.from(he.decode(A.data));let I=[];Te(I,N.length);let F=[];return Te(F,T.length),{programIdIndex:M,keyIndicesCount:gt.Buffer.from(I),keyIndices:N,dataLength:gt.Buffer.from(F),data:T}});let s=[];Te(s,n.length);let i=gt.Buffer.alloc(Rn);gt.Buffer.from(s).copy(i);let o=s.length;n.forEach(A=>{const M=Q([St("programIdIndex"),Dt(A.keyIndicesCount.length,"keyIndicesCount"),xe(St("keyIndex"),A.keyIndices.length,"keyIndices"),Dt(A.dataLength.length,"dataLength"),xe(St("userdatum"),A.data.length,"data")]).encode(A,i,o);o+=M}),i=i.slice(0,o);const c=Q([Dt(1,"numRequiredSignatures"),Dt(1,"numReadonlySignedAccounts"),Dt(1,"numReadonlyUnsignedAccounts"),Dt(e.length,"keyCount"),xe(vt("key"),t,"keys"),vt("recentBlockhash")]),h={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(e),keys:this.accountKeys.map(A=>Fn(A.toBytes())),recentBlockhash:he.decode(this.recentBlockhash)};let E=gt.Buffer.alloc(2048);const S=c.encode(h,E);return i.copy(E,S),E.slice(0,S+i.length)}static from(t){let e=[...t];const n=Je(e);if(n!==(n&Xo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Je(e),i=Je(e),o=Le(e);let c=[];for(let N=0;N<o;N++){const M=Ce(e,0,un);c.push(new ct(gt.Buffer.from(M)))}const h=Ce(e,0,un),E=Le(e);let S=[];for(let N=0;N<E;N++){const M=Je(e),T=Le(e),I=Ce(e,0,T),F=Le(e),z=Ce(e,0,F),J=he.encode(gt.Buffer.from(z));S.push({programIdIndex:M,accounts:I,data:J})}const A={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:he.encode(gt.Buffer.from(h)),accountKeys:c,instructions:S};return new fn(A)}}class br{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new yr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Rr.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const S of i){const A=e.extractTableLookup(S);if(A!==void 0){const[N,{writable:M,readonly:T}]=A;n.push(N),s.writable.push(...M),s.readonly.push(...T)}}const[o,c]=e.getMessageComponents(),E=new yr(c,s).compileInstructions(t.instructions);return new br({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:E,addressTableLookups:n})}serialize(){const t=Array();Te(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Te(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Te(i,this.addressTableLookups.length);const o=Q([St("prefix"),Q([St("numRequiredSignatures"),St("numReadonlySignedAccounts"),St("numReadonlyUnsignedAccounts")],"header"),Dt(t.length,"staticAccountKeysLength"),xe(vt(),this.staticAccountKeys.length,"staticAccountKeys"),vt("recentBlockhash"),Dt(n.length,"instructionsLength"),Dt(e.length,"serializedInstructions"),Dt(i.length,"addressTableLookupsLength"),Dt(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Rn),E=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:he.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,E)}serializeInstructions(){let t=0;const e=new Uint8Array(Rn);for(const n of this.compiledInstructions){const s=Array();Te(s,n.accountKeyIndexes.length);const i=Array();Te(i,n.data.length);const o=Q([St("programIdIndex"),Dt(s.length,"encodedAccountKeyIndexesLength"),xe(St(),n.accountKeyIndexes.length,"accountKeyIndexes"),Dt(i.length,"encodedDataLength"),Dt(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Rn);for(const n of this.addressTableLookups){const s=Array();Te(s,n.writableIndexes.length);const i=Array();Te(i,n.readonlyIndexes.length);const o=Q([vt("accountKey"),Dt(s.length,"encodedWritableIndexesLength"),xe(St(),n.writableIndexes.length,"writableIndexes"),Dt(i.length,"encodedReadonlyIndexesLength"),xe(St(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=Je(e),s=n&Xo;ae(n!==s,"Expected versioned message but received legacy message");const i=s;ae(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Je(e),numReadonlySignedAccounts:Je(e),numReadonlyUnsignedAccounts:Je(e)},c=[],h=Le(e);for(let T=0;T<h;T++)c.push(new ct(Ce(e,0,un)));const E=he.encode(Ce(e,0,un)),S=Le(e),A=[];for(let T=0;T<S;T++){const I=Je(e),F=Le(e),z=Ce(e,0,F),J=Le(e),P=new Uint8Array(Ce(e,0,J));A.push({programIdIndex:I,accountKeyIndexes:z,data:P})}const N=Le(e),M=[];for(let T=0;T<N;T++){const I=new ct(Ce(e,0,un)),F=Le(e),z=Ce(e,0,F),J=Le(e),P=Ce(e,0,J);M.push({accountKey:I,writableIndexes:z,readonlyIndexes:P})}return new br({header:o,staticAccountKeys:c,recentBlockhash:E,compiledInstructions:A,addressTableLookups:M})}}let rn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const vf=gt.Buffer.alloc(Jo).fill(0);class Ts{constructor(t){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class sn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ts(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];e.forEach(I=>{I.keys.forEach(z=>{i.push({...z})});const F=I.programId.toString();s.includes(F)||s.push(F)}),s.forEach(I=>{i.push({pubkey:new ct(I),isSigner:!1,isWritable:!1})});const o=[];i.forEach(I=>{const F=I.pubkey.toString(),z=o.findIndex(J=>J.pubkey.toString()===F);z>-1?(o[z].isWritable=o[z].isWritable||I.isWritable,o[z].isSigner=o[z].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,F){if(I.isSigner!==F.isSigner)return I.isSigner?-1:1;if(I.isWritable!==F.isWritable)return I.isWritable?-1:1;const z={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(F.pubkey.toBase58(),"en",z)});const c=o.findIndex(I=>I.pubkey.equals(n));if(c>-1){const[I]=o.splice(c,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const I of this.signatures){const F=o.findIndex(z=>z.pubkey.equals(I.publicKey));if(F>-1)o[F].isSigner||(o[F].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let h=0,E=0,S=0;const A=[],N=[];o.forEach(({pubkey:I,isSigner:F,isWritable:z})=>{F?(A.push(I.toString()),h+=1,z||(E+=1)):(N.push(I.toString()),z||(S+=1))});const M=A.concat(N),T=e.map(I=>{const{data:F,programId:z}=I;return{programIdIndex:M.indexOf(z.toString()),accounts:I.keys.map(J=>M.indexOf(J.pubkey.toString())),data:he.encode(F)}});return T.forEach(I=>{ae(I.programIdIndex>=0),I.accounts.forEach(F=>ae(F>=0))}),new fn({header:{numRequiredSignatures:h,numReadonlySignedAccounts:E,numReadonlyUnsignedAccounts:S},accountKeys:M,recentBlockhash:t,instructions:T})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=lf(n,s.secretKey);this._addSignature(s.publicKey,Fn(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ae(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=gt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):hf(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Te(n,e.length);const s=n.length+e.length*64+t.length,i=gt.Buffer.alloc(s);return ae(e.length<256),gt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(ae(o.length===64,"signature has invalid length"),gt.Buffer.from(o).copy(i,n.length+c*64))}),t.copy(i,n.length+e.length*64),ae(i.length<=Rn,`Transaction too large: ${i.length} > ${Rn}`),i}get keys(){return ae(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ae(this.instructions.length===1),this.instructions[0].programId}get data(){return ae(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Le(e);let s=[];for(let i=0;i<n;i++){const o=Ce(e,0,Jo);s.push(he.encode(gt.Buffer.from(o)))}return sn.populate(fn.from(e),s)}static populate(t,e=[]){const n=new sn;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==he.encode(vf)?null:he.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(h=>h.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Ts({keys:i,programId:t.accountKeys[s.programIdIndex],data:he.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}const xf=160,Ef=64,Sf=xf/Ef,Bf=1e3/Sf;new ct("SysvarC1ock11111111111111111111111111111111");new ct("SysvarEpochSchedu1e111111111111111111111111");new ct("Sysvar1nstructions1111111111111111111111111");new ct("SysvarRecentB1ockHashes11111111111111111111");new ct("SysvarRent111111111111111111111111111111111");new ct("SysvarRewards111111111111111111111111111111");new ct("SysvarS1otHashes111111111111111111111111111");new ct("SysvarS1otHistory11111111111111111111111111");new ct("SysvarStakeHistory1111111111111111111111111");class Cs extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:c=`Unknown action '${(h=>h)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class tt extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function kn(r){return new Promise(t=>setTimeout(t,r))}const _f=fe("lamportsPerSignature"),na=Q([rt("version"),rt("state"),vt("authorizedPubkey"),vt("nonce"),Q([_f],"feeCalculator")]);na.span;class Qi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=na.decode(Fn(t),0);return new Qi({authorizedPubkey:new ct(e.authorizedPubkey),nonce:new ct(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Nn(r){const t=Dt(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=hu();return s.decode=(o,c)=>{const h=e(o,c);return i.decode(h)},s.encode=(o,c,h)=>{const E=i.encode(o);return n(E,c,h)},s}Object.freeze({Create:{index:0,layout:Q([rt("instruction"),ke("lamports"),ke("space"),vt("programId")])},Assign:{index:1,layout:Q([rt("instruction"),vt("programId")])},Transfer:{index:2,layout:Q([rt("instruction"),Nn("lamports")])},CreateWithSeed:{index:3,layout:Q([rt("instruction"),vt("base"),In("seed"),ke("lamports"),ke("space"),vt("programId")])},AdvanceNonceAccount:{index:4,layout:Q([rt("instruction")])},WithdrawNonceAccount:{index:5,layout:Q([rt("instruction"),ke("lamports")])},InitializeNonceAccount:{index:6,layout:Q([rt("instruction"),vt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Q([rt("instruction"),vt("authorized")])},Allocate:{index:8,layout:Q([rt("instruction"),ke("space")])},AllocateWithSeed:{index:9,layout:Q([rt("instruction"),vt("base"),In("seed"),ke("space"),vt("programId")])},AssignWithSeed:{index:10,layout:Q([rt("instruction"),vt("base"),In("seed"),vt("programId")])},TransferWithSeed:{index:11,layout:Q([rt("instruction"),Nn("lamports"),In("seed"),vt("programId")])},UpgradeNonceAccount:{index:12,layout:Q([rt("instruction")])}});new ct("11111111111111111111111111111111");new ct("BPFLoader2111111111111111111111111111111111");function Af(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gi,Us;function kf(){if(Us)return gi;Us=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,c,h,E,S,A;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(A=r.call(n),A==="[object Array]"){for(c="[",o=n.length-1,i=0;i<o;i++)c+=e(n[i],!0)+",";return o>-1&&(c+=e(n[i],!0)),c+"]"}else if(A==="[object Object]"){for(h=t(n).sort(),o=h.length,c="",i=0;i<o;)E=h[i],S=e(n[E],!1),S!==void 0&&(c&&(c+=","),c+=JSON.stringify(E)+":"+S),i++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return gi=function(n){var s=e(n,!1);if(s!==void 0)return""+s},gi}var If=kf(),Fs=Af(If);const zn=32;function mi(r){let t=0;for(;r>1;)r/=2,t++;return t}function Mf(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Rf{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=mi(Mf(t+zn+1))-mi(zn)-1,n=this.getSlotsInEpoch(e),s=t-(n-zn);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*zn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+mi(zn)):this.slotsPerEpoch}}var Lf=globalThis.fetch;class Tf extends Xu{constructor(t,e,n){const s=i=>{const o=Zu(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Cf(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Ns=56;class Os{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Cf(Uf,t),n=t.length-Ns;ae(n>=0,"lookup table is invalid"),ae(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=Q([xe(vt(),s,"addresses")]).decode(t.slice(Ns));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ct(e.authority[0]):void 0,addresses:i.map(o=>new ct(o))}}}const Uf={index:1,layout:Q([rt("typeIndex"),Nn("deactivationSlot"),fe("lastExtendedSlot"),St("lastExtendedStartIndex"),St(),xe(vt(),gn(St(),-1),"authority")])},Ff=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Nf(r){const t=r.match(Ff);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),h=c==null?"":`:${c+1}`;return`${o}//${n}${h}${i}`}const Nt=Qn(Xi(ct),K(),r=>new ct(r)),ra=Ji([K(),Ft("base64")]),ts=Qn(Xi(gt.Buffer),ra,r=>gt.Buffer.from(r[0],"base64")),Of=30*1e3;function Pf(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function It(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Ps(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ia(r){return Ee([D({jsonrpc:Ft("2.0"),id:K(),result:r}),D({jsonrpc:Ft("2.0"),id:K(),error:D({code:qn(),message:K(),data:st(bu())})})])}const qf=ia(qn());function yt(r){return Qn(ia(r),qf,t=>"error"in t?t:{...t,result:j(t.result,r)})}function zt(r){return yt(D({context:D({slot:L()}),value:r}))}function Lr(r){return D({context:D({slot:L()}),value:r})}function wi(r,t){return r===0?new br({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ct(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:he.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new fn(t)}const Df=D({foundation:L(),foundationTerm:L(),initial:L(),taper:L(),terminal:L()}),zf=yt(Z(Y(D({epoch:L(),effectiveSlot:L(),amount:L(),postBalance:L(),commission:st(Y(L()))})))),Hf=Z(D({slot:L(),prioritizationFee:L()})),Kf=D({total:L(),validator:L(),foundation:L(),epoch:L()}),$f=D({epoch:L(),slotIndex:L(),slotsInEpoch:L(),absoluteSlot:L(),blockHeight:st(L()),transactionCount:st(L())}),Wf=D({slotsPerEpoch:L(),leaderScheduleSlotOffset:L(),warmup:Ke(),firstNormalEpoch:L(),firstNormalSlot:L()}),Vf=qo(K(),Z(L())),yn=Y(Ee([D({}),K()])),jf=D({err:yn}),Gf=Ft("receivedSignature"),Zf=D({"solana-core":K(),"feature-set":st(L())}),Yf=D({program:K(),programId:Nt,parsed:qn()}),Xf=D({programId:Nt,accounts:Z(Nt),data:K()}),qs=zt(D({err:Y(Ee([D({}),K()])),logs:Y(Z(K())),accounts:st(Y(Z(Y(D({executable:Ke(),owner:K(),lamports:L(),data:Z(K()),rentEpoch:st(L())}))))),unitsConsumed:st(L()),returnData:st(Y(D({programId:K(),data:Ji([K(),Ft("base64")])}))),innerInstructions:st(Y(Z(D({index:L(),instructions:Z(Ee([Yf,Xf]))}))))})),Jf=zt(D({byIdentity:qo(K(),Z(L())),range:D({firstSlot:L(),lastSlot:L()})}));function Qf(r,t,e,n,s,i){const o=e||Lf;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let h;return n&&(h=async(S,A)=>{const N=await new Promise((M,T)=>{try{n(S,A,(I,F)=>M([I,F]))}catch(I){T(I)}});return await o(...N)}),new Vu(async(S,A)=>{const N={method:"POST",body:S,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},Ql)};try{let M=5,T,I=500;for(;h?T=await h(r,N):T=await o(r,N),!(T.status!==429||s===!0||(M-=1,M===0));)console.error(`Server responded with ${T.status} ${T.statusText}.  Retrying after ${I}ms delay...`),await kn(I),I*=2;const F=await T.text();T.ok?A(null,F):A(new Error(`${T.status} ${T.statusText}: ${F}`))}catch(M){M instanceof Error&&A(M)}},{})}function tl(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function el(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const nl=yt(Df),rl=yt(Kf),il=yt(Hf),sl=yt($f),ol=yt(Wf),al=yt(Vf),cl=yt(L()),ul=zt(D({total:L(),circulating:L(),nonCirculating:L(),nonCirculatingAccounts:Z(Nt)})),ki=D({amount:K(),uiAmount:Y(L()),decimals:L(),uiAmountString:st(K())}),fl=zt(Z(D({address:Nt,amount:K(),uiAmount:Y(L()),decimals:L(),uiAmountString:st(K())}))),ll=zt(Z(D({pubkey:Nt,account:D({executable:Ke(),owner:Nt,lamports:L(),data:ts,rentEpoch:L()})}))),Ii=D({program:K(),parsed:qn(),space:L()}),hl=zt(Z(D({pubkey:Nt,account:D({executable:Ke(),owner:Nt,lamports:L(),data:Ii,rentEpoch:L()})}))),dl=zt(Z(D({lamports:L(),address:Nt}))),Wn=D({executable:Ke(),owner:Nt,lamports:L(),data:ts,rentEpoch:L()}),pl=D({pubkey:Nt,account:Wn}),gl=Qn(Ee([Xi(gt.Buffer),Ii]),Ee([ra,Ii]),r=>Array.isArray(r)?j(r,ts):r),Mi=D({executable:Ke(),owner:Nt,lamports:L(),data:gl,rentEpoch:L()}),ml=D({pubkey:Nt,account:Mi}),wl=D({state:Ee([Ft("active"),Ft("inactive"),Ft("activating"),Ft("deactivating")]),active:L(),inactive:L()}),yl=yt(Z(D({signature:K(),slot:L(),err:yn,memo:Y(K()),blockTime:st(Y(L()))}))),bl=yt(Z(D({signature:K(),slot:L(),err:yn,memo:Y(K()),blockTime:st(Y(L()))}))),vl=D({subscription:L(),result:Lr(Wn)}),xl=D({pubkey:Nt,account:Wn}),El=D({subscription:L(),result:Lr(xl)}),Sl=D({parent:L(),slot:L(),root:L()}),Bl=D({subscription:L(),result:Sl}),_l=Ee([D({type:Ee([Ft("firstShredReceived"),Ft("completed"),Ft("optimisticConfirmation"),Ft("root")]),slot:L(),timestamp:L()}),D({type:Ft("createdBank"),parent:L(),slot:L(),timestamp:L()}),D({type:Ft("frozen"),slot:L(),timestamp:L(),stats:D({numTransactionEntries:L(),numSuccessfulTransactions:L(),numFailedTransactions:L(),maxTransactionsPerEntry:L()})}),D({type:Ft("dead"),slot:L(),timestamp:L(),err:K()})]),Al=D({subscription:L(),result:_l}),kl=D({subscription:L(),result:Lr(Ee([jf,Gf]))}),Il=D({subscription:L(),result:L()}),Ml=D({pubkey:K(),gossip:Y(K()),tpu:Y(K()),rpc:Y(K()),version:Y(K())}),Ds=D({votePubkey:K(),nodePubkey:K(),activatedStake:L(),epochVoteAccount:Ke(),epochCredits:Z(Ji([L(),L(),L()])),commission:L(),lastVote:L(),rootSlot:Y(L())}),Rl=yt(D({current:Z(Ds),delinquent:Z(Ds)})),Ll=Ee([Ft("processed"),Ft("confirmed"),Ft("finalized")]),Tl=D({slot:L(),confirmations:Y(L()),err:yn,confirmationStatus:st(Ll)}),Cl=zt(Z(Y(Tl))),Ul=yt(L()),sa=D({accountKey:Nt,writableIndexes:Z(L()),readonlyIndexes:Z(L())}),es=D({signatures:Z(K()),message:D({accountKeys:Z(K()),header:D({numRequiredSignatures:L(),numReadonlySignedAccounts:L(),numReadonlyUnsignedAccounts:L()}),instructions:Z(D({accounts:Z(L()),data:K(),programIdIndex:L()})),recentBlockhash:K(),addressTableLookups:st(Z(sa))})}),oa=D({pubkey:Nt,signer:Ke(),writable:Ke(),source:st(Ee([Ft("transaction"),Ft("lookupTable")]))}),aa=D({accountKeys:Z(oa),signatures:Z(K())}),ca=D({parsed:qn(),program:K(),programId:Nt}),ua=D({accounts:Z(Nt),data:K(),programId:Nt}),Fl=Ee([ua,ca]),Nl=Ee([D({parsed:qn(),program:K(),programId:K()}),D({accounts:Z(K()),data:K(),programId:K()})]),fa=Qn(Fl,Nl,r=>"accounts"in r?j(r,ua):j(r,ca)),la=D({signatures:Z(K()),message:D({accountKeys:Z(oa),instructions:Z(fa),recentBlockhash:K(),addressTableLookups:st(Y(Z(sa)))})}),vr=D({accountIndex:L(),mint:K(),owner:st(K()),programId:st(K()),uiTokenAmount:ki}),ha=D({writable:Z(Nt),readonly:Z(Nt)}),Tr=D({err:yn,fee:L(),innerInstructions:st(Y(Z(D({index:L(),instructions:Z(D({accounts:Z(L()),data:K(),programIdIndex:L()}))})))),preBalances:Z(L()),postBalances:Z(L()),logMessages:st(Y(Z(K()))),preTokenBalances:st(Y(Z(vr))),postTokenBalances:st(Y(Z(vr))),loadedAddresses:st(ha),computeUnitsConsumed:st(L())}),ns=D({err:yn,fee:L(),innerInstructions:st(Y(Z(D({index:L(),instructions:Z(fa)})))),preBalances:Z(L()),postBalances:Z(L()),logMessages:st(Y(Z(K()))),preTokenBalances:st(Y(Z(vr))),postTokenBalances:st(Y(Z(vr))),loadedAddresses:st(ha),computeUnitsConsumed:st(L())}),Dn=Ee([Ft(0),Ft("legacy")]),bn=D({pubkey:K(),lamports:L(),postBalance:Y(L()),rewardType:Y(K()),commission:st(Y(L()))}),Ol=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:Z(D({transaction:es,meta:Y(Tr),version:st(Dn)})),rewards:st(Z(bn)),blockTime:Y(L()),blockHeight:Y(L())}))),Pl=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),rewards:st(Z(bn)),blockTime:Y(L()),blockHeight:Y(L())}))),ql=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:Z(D({transaction:aa,meta:Y(Tr),version:st(Dn)})),rewards:st(Z(bn)),blockTime:Y(L()),blockHeight:Y(L())}))),Dl=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:Z(D({transaction:la,meta:Y(ns),version:st(Dn)})),rewards:st(Z(bn)),blockTime:Y(L()),blockHeight:Y(L())}))),zl=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:Z(D({transaction:aa,meta:Y(ns),version:st(Dn)})),rewards:st(Z(bn)),blockTime:Y(L()),blockHeight:Y(L())}))),Hl=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),rewards:st(Z(bn)),blockTime:Y(L()),blockHeight:Y(L())}))),Kl=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),transactions:Z(D({transaction:es,meta:Y(Tr)})),rewards:st(Z(bn)),blockTime:Y(L())}))),zs=yt(Y(D({blockhash:K(),previousBlockhash:K(),parentSlot:L(),signatures:Z(K()),blockTime:Y(L())}))),yi=yt(Y(D({slot:L(),meta:Y(Tr),blockTime:st(Y(L())),transaction:es,version:st(Dn)}))),or=yt(Y(D({slot:L(),transaction:la,meta:Y(ns),blockTime:st(Y(L())),version:st(Dn)}))),$l=zt(D({blockhash:K(),lastValidBlockHeight:L()})),Wl=zt(Ke()),Vl=D({slot:L(),numTransactions:L(),numSlots:L(),samplePeriodSecs:L()}),jl=yt(Z(Vl)),Gl=zt(Y(D({feeCalculator:D({lamportsPerSignature:L()})}))),Zl=yt(K()),Yl=yt(K()),Xl=D({err:yn,logs:Z(K()),signature:K()}),Jl=D({result:Lr(Xl),subscription:L()}),Ql={"solana-client":"js/1.0.0-maintenance"};class th{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const E={};return async S=>{const{commitment:A,config:N}=It(S),M=this._buildArgs([],A,void 0,N),T=Fs(M);return E[T]=E[T]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",M),F=j(I,yt(L()));if("error"in F)throw new tt(F.error,"failed to get block height information");return F.result}finally{delete E[T]}})(),await E[T]}})();let n,s,i,o,c,h;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,h=e.httpAgent),this._rpcEndpoint=Pf(t),this._rpcWsEndpoint=n||Nf(t),this._rpcClient=Qf(t,s,i,o,c,h),this._rpcRequest=tl(this._rpcClient),this._rpcBatchRequest=el(this._rpcClient),this._rpcWebSocket=new Tf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),c=j(o,zt(L()));if("error"in c)throw new tt(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=j(e,yt(Y(L())));if("error"in n)throw new tt(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=j(t,yt(L()));if("error"in e)throw new tt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=j(t,cl);if("error"in e)throw new tt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=j(n,ul);if("error"in s)throw new tt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=j(s,zt(ki));if("error"in i)throw new tt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=j(s,zt(ki));if("error"in i)throw new tt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=It(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),h=await this._rpcRequest("getTokenAccountsByOwner",c),E=j(h,ll);if("error"in E)throw new tt(E.error,`failed to get token accounts owned by account ${t.toBase58()}`);return E.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=j(o,hl);if("error"in c)throw new tt(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=j(s,dl);if("error"in i)throw new tt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=j(s,fl);if("error"in i)throw new tt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=j(o,zt(Y(Wn)));if("error"in c)throw new tt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=j(o,zt(Y(Mi)));if("error"in c)throw new tt(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=It(e),i=t.map(E=>E.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),h=j(c,zt(Z(Y(Mi))));if("error"in h)throw new tt(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=It(e),i=t.map(E=>E.toBase58()),o=this._buildArgs([i],n,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),h=j(c,zt(Z(Y(Wn))));if("error"in h)throw new tt(h.error,`failed to get info for accounts ${i}`);return h.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=It(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getStakeActivation",o),h=j(c,yt(wl));if("error"in h)throw new tt(h.error,`failed to get Stake Activation ${t.toBase58()}`);return h.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=It(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Ps(o.filters)}:null}),h=await this._rpcRequest("getProgramAccounts",c),E=Z(pl),S=o.withContext===!0?j(h,zt(E)):j(h,yt(E));if("error"in S)throw new tt(S.error,`failed to get accounts owned by program ${t.toBase58()}`);return S.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=j(o,yt(Z(ml)));if("error"in c)throw new tt(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=he.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return ae(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((h,E)=>{try{n=this.onSignature(e,(A,N)=>{n=void 0;const M={context:N,value:A};h({__type:rn.PROCESSED,response:M})},t);const S=new Promise(A=>{n==null?A():s=this._onSubscriptionStateChange(n,N=>{N==="subscribed"&&A()})});(async()=>{if(await S,i)return;const A=await this.getSignatureStatus(e);if(i||A==null)return;const{context:N,value:M}=A;if(M!=null)if(M!=null&&M.err)E(M.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(M.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(M.confirmationStatus==="processed"||M.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,h({__type:rn.PROCESSED,response:{context:N,value:M}})}})()}catch(S){E(S)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(A=>{const N=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let M=await N();if(!i){for(;M<=n;)if(await kn(1e3),i||(M=await N(),i))return;A({__type:rn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),E=this.getCancellationPromise(e);let S;try{const A=await Promise.race([E,h,o]);if(A.__type===rn.PROCESSED)S=A.response;else throw new Qo(s)}finally{i=!0,c()}return S}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const h=new Promise(M=>{let T=i,I=null;const F=async()=>{try{const{context:z,value:J}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return I=z.slot,J==null?void 0:J.nonce}catch{return T}};(async()=>{if(T=await F(),!c)for(;;){if(i!==T){M({__type:rn.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await kn(2e3),c||(T=await F(),c))return}})()}),{abortConfirmation:E,confirmationPromise:S}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),A=this.getCancellationPromise(e);let N;try{const M=await Promise.race([A,S,h]);if(M.__type===rn.PROCESSED)N=M.response;else{let T;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(M.slotInWhichNonceDidAdvance??n)){await kn(400);continue}T=I;break}if(T!=null&&T.value){const I=t||"finalized",{confirmationStatus:F}=T.value;switch(I){case"processed":case"recent":if(F!=="processed"&&F!=="confirmed"&&F!=="finalized")throw new Hn(o);break;case"confirmed":case"single":case"singleGossip":if(F!=="confirmed"&&F!=="finalized")throw new Hn(o);break;case"finalized":case"max":case"root":if(F!=="finalized")throw new Hn(o);break;default:}N={context:T.context,value:{err:T.value.err}}}else throw new Hn(o)}}finally{c=!0,E()}return N}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(h=>{let E=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{E=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>h({__type:rn.TIMED_OUT,timeoutMs:E}),E)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const h=await Promise.race([o,s]);if(h.__type===rn.PROCESSED)c=h.response;else throw new ta(e,h.timeoutMs/1e3)}finally{clearTimeout(n),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=j(t,yt(Z(Ml)));if("error"in e)throw new tt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=j(n,Rl);if("error"in s)throw new tt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=It(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=j(i,yt(L()));if("error"in o)throw new tt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=It(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=j(i,yt(K()));if("error"in o)throw new tt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=j(s,yt(Z(Nt)));if("error"in i)throw new tt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);ae(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=j(s,Cl);if("error"in i)throw new tt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=It(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=j(i,yt(L()));if("error"in o)throw new tt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=j(n,nl);if("error"in s)throw new tt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=It(n),o=this._buildArgs([t.map(E=>E.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getInflationReward",o),h=j(c,zf);if("error"in h)throw new tt(h.error,"failed to get inflation reward");return h.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=j(t,rl);if("error"in e)throw new tt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=It(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=j(i,sl);if("error"in o)throw new tt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=j(t,ol);if("error"in e)throw new tt(e.error,"failed to get epoch schedule");const n=e.result;return new Rf(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=j(t,al);if("error"in e)throw new tt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=j(s,Ul);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=j(e,jl);if("error"in n)throw new tt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=j(s,Gl);if("error"in i)throw new tt(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const n=Fn(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=j(i,zt(Y(L())));if("error"in o)throw new tt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(c=>c.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=j(s,il);if("error"in i)throw new tt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=It(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=j(i,$l);if("error"in o)throw new tt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=j(o,Wl);if("error"in c)throw new tt(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=j(t,yt(Zf));if("error"in e)throw new tt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=j(t,yt(K()));if("error"in e)throw new tt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=j(o,ql);if("error"in c)throw c.error;return c.result}case"none":{const c=j(o,Pl);if("error"in c)throw c.error;return c.result}default:{const c=j(o,Ol);if("error"in c)throw c.error;const{result:h}=c;return h?{...h,transactions:h.transactions.map(({transaction:E,meta:S,version:A})=>({meta:S,transaction:{...E,message:wi(A,E.message)},version:A}))}:null}}}catch(c){throw new tt(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=j(o,zl);if("error"in c)throw c.error;return c.result}case"none":{const c=j(o,Hl);if("error"in c)throw c.error;return c.result}default:{const c=j(o,Dl);if("error"in c)throw c.error;return c.result}}}catch(c){throw new tt(c,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:c,...h}=t;n=c,e=h}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=j(i,Jf);if("error"in o)throw new tt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),c=j(o,yi);if("error"in c)throw new tt(c.error,"failed to get transaction");const h=c.result;return h&&{...h,transaction:{...h.transaction,message:wi(h.version,h.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=It(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=j(o,or);if("error"in c)throw new tt(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=It(e),i=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(h=>{const E=j(h,or);if("error"in E)throw new tt(E.error,"failed to get transactions");return E.result})}async getTransactions(t,e){const{commitment:n,config:s}=It(e),i=t.map(h=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([h],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(h=>{const E=j(h,yi);if("error"in E)throw new tt(E.error,"failed to get transactions");const S=E.result;return S&&{...S,transaction:{...S.transaction,message:wi(S.version,S.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=j(s,Kl);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:h,meta:E})=>{const S=new fn(h.message);return{meta:E,transaction:{...h,message:S}}})};return{...c,transactions:c.transactions.map(({transaction:h,meta:E})=>({meta:E,transaction:sn.populate(h.message,h.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=j(i,yt(Z(L())));if("error"in o)throw new tt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=j(s,zs);if("error"in i)throw new tt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=j(s,zs);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=j(s,yi);if("error"in i)throw new tt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new fn(o.transaction.message),h=o.transaction.signatures;return{...o,transaction:sn.populate(c,h)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=j(s,or);if("error"in i)throw new tt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=j(o,or);if("error"in c)throw new tt(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const h=await this.getConfirmedBlockSignatures(e,"finalized");h.signatures.length>0&&(s.until=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const h=await this.getConfirmedBlockSignatures(n);h.signatures.length>0&&(s.before=h.signatures[h.signatures.length-1].toString())}catch(h){if(h instanceof Error&&h.message.includes("skipped"))continue;throw h}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(h=>h.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=j(i,yl);if("error"in o)throw new tt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=j(i,bl);if("error"in o)throw new tt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Os({key:t,state:Os.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Qi.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=j(n,Zl);if("error"in s)throw new tt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await kn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Of;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await kn(Bf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=It(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=j(i,zt(L()));if("error"in o)throw new tt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const I=t.serialize(),F=gt.Buffer.from(I).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const z=e||{};z.encoding="base64","commitment"in z||(z.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(z.innerInstructions=e.innerInstructions);const J=[F,z],P=await this._rpcRequest("simulateTransaction",J),C=j(P,qs);if("error"in C)throw new Error("failed to simulate transaction: "+C.error.message);return C.result}let s;if(t instanceof sn){let T=t;s=new sn,s.feePayer=T.feePayer,s.instructions=t.instructions,s.nonceInfo=T.nonceInfo,s.signatures=T.signatures}else s=sn.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let T=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(T);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const F=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(F)&&!this._blockhashInfo.transactionSignatures.includes(F)){this._blockhashInfo.simulatedSignatures.push(F);break}else T=!0}}const o=s._compile(),c=o.serialize(),E=s._serialize(c).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(n){const T=(Array.isArray(n)?n:o.nonProgramIds()).map(I=>I.toBase58());S.accounts={encoding:"base64",addresses:T}}i&&(S.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(S.innerInstructions=e.innerInstructions);const A=[E,S],N=await this._rpcRequest("simulateTransaction",A),M=j(N,qs);if("error"in M){let T;if("data"in M.error&&(T=M.error.data.logs,T&&Array.isArray(T))){const I=`
    `,F=I+T.join(I);console.error(M.error.message,F)}throw new Cs({action:"simulate",signature:"",transactionMessage:M.error.message,logs:T})}return M.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const h=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(h))o=!0;else{this._blockhashInfo.transactionSignatures.push(h);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=Fn(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],c=await this._rpcRequest("sendTransaction",o),h=j(c,Yl);if("error"in h){let E;throw"data"in h.error&&(E=h.error.data.logs),new Cs({action:s?"send":"simulate",signature:"",transactionMessage:h.error.message,logs:E})}return h.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=j(t,vl);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=Fs([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];ae(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=It(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=j(t,El);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=It(n),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Ps(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=j(t,Jl);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=j(t,Bl);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=j(t,Al);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=j(t,kl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(h,E)=>{e(h,E);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=j(t,Il);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Q([rt("instruction"),Nn("recentSlot"),St("bumpSeed")])},FreezeLookupTable:{index:1,layout:Q([rt("instruction")])},ExtendLookupTable:{index:2,layout:Q([rt("instruction"),Nn(),xe(vt(),gn(rt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Q([rt("instruction")])},CloseLookupTable:{index:4,layout:Q([rt("instruction")])}});new ct("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Q([St("instruction"),rt("units"),rt("additionalFee")])},RequestHeapFrame:{index:1,layout:Q([St("instruction"),rt("bytes")])},SetComputeUnitLimit:{index:2,layout:Q([St("instruction"),rt("units")])},SetComputeUnitPrice:{index:3,layout:Q([St("instruction"),Nn("microLamports")])}});new ct("ComputeBudget111111111111111111111111111111");Q([St("numSignatures"),St("padding"),Re("signatureOffset"),Re("signatureInstructionIndex"),Re("publicKeyOffset"),Re("publicKeyInstructionIndex"),Re("messageDataOffset"),Re("messageDataSize"),Re("messageInstructionIndex")]);new ct("Ed25519SigVerify111111111111111111111111111");ff.utils.isValidPrivateKey;Q([St("numSignatures"),Re("signatureOffset"),St("signatureInstructionIndex"),Re("ethAddressOffset"),St("ethAddressInstructionIndex"),Re("messageDataOffset"),Re("messageDataSize"),St("messageInstructionIndex"),Dt(20,"ethAddress"),Dt(64,"signature"),St("recoveryId")]);new ct("KeccakSecp256k11111111111111111111111111111");var da;new ct("StakeConfig11111111111111111111111111111111");class pa{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}da=pa;pa.default=new da(0,0,ct.default);Object.freeze({Initialize:{index:0,layout:Q([rt("instruction"),mf(),wf()])},Authorize:{index:1,layout:Q([rt("instruction"),vt("newAuthorized"),rt("stakeAuthorizationType")])},Delegate:{index:2,layout:Q([rt("instruction")])},Split:{index:3,layout:Q([rt("instruction"),ke("lamports")])},Withdraw:{index:4,layout:Q([rt("instruction"),ke("lamports")])},Deactivate:{index:5,layout:Q([rt("instruction")])},Merge:{index:7,layout:Q([rt("instruction")])},AuthorizeWithSeed:{index:8,layout:Q([rt("instruction"),vt("newAuthorized"),rt("stakeAuthorizationType"),In("authoritySeed"),vt("authorityOwner")])}});new ct("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Q([rt("instruction"),yf()])},Authorize:{index:1,layout:Q([rt("instruction"),vt("newAuthorized"),rt("voteAuthorizationType")])},Withdraw:{index:3,layout:Q([rt("instruction"),ke("lamports")])},UpdateValidatorIdentity:{index:4,layout:Q([rt("instruction")])},AuthorizeWithSeed:{index:10,layout:Q([rt("instruction"),bf()])}});new ct("Vote111111111111111111111111111111111111111");new ct("Va1idator1nfo111111111111111111111111111111");D({name:K(),website:st(K()),details:st(K()),iconUrl:st(K()),keybaseUsername:st(K())});new ct("Vote111111111111111111111111111111111111111");Q([vt("nodePubkey"),vt("authorizedWithdrawer"),St("commission"),fe(),xe(Q([fe("slot"),rt("confirmationCount")]),gn(rt(),-8),"votes"),St("rootSlotValid"),fe("rootSlot"),fe(),xe(Q([fe("epoch"),vt("authorizedVoter")]),gn(rt(),-8),"authorizedVoters"),Q([xe(Q([vt("authorizedPubkey"),fe("epochOfLastAuthorizedSwitch"),fe("targetEpoch")]),32,"buf"),fe("idx"),St("isEmpty")],"priorVoters"),fe(),xe(Q([fe("epoch"),fe("credits"),fe("prevCredits")]),gn(rt(),-8),"epochCredits"),Q([fe("slot"),fe("timestamp")],"lastTimestamp")]);new th("https://api.mainnet-beta.solana.com","confirmed");async function eh(){return new Promise((r,t)=>{let e=0;const n=20;console.log("Начало поиска Backpack...");const s=setInterval(()=>{var o;const i=Object.keys(window).filter(c=>c.toLowerCase().includes("solana")||c.toLowerCase().includes("backpack"));console.log("Обнаруженные ключи:",i);for(const c of i){const h=window[c];if(console.log(`Проверка ключа ${c}:`,h),h!=null&&h.isBackpack){clearInterval(s),console.log("Найден Backpack:",h),r(h);return}}if((o=window.solana)!=null&&o.isBackpack){clearInterval(s),console.log("Найден Backpack в window.solana:",window.solana),r(window.solana);return}e++,console.log(`Попытка ${e}/${n}`),e>=n&&(clearInterval(s),console.log("Backpack не найден. Доступные объекты:",window.solana),t(new Error("Backpack wallet not detected after timeout")))},500)})}document.getElementById("connect-button").addEventListener("click",async()=>{try{const r=await eh();if(!r.isBackpack)throw new Error("Выбранный кошелёк не является Backpack");await r.connect();const t=new ct(r.publicKey.toString());console.log("Кошелёк Backpack подключен к Solana Mainnet:",t.toBase58()),document.getElementById("wallet-status").textContent=`Подключен: ${t.toBase58()}`}catch(r){console.error("Ошибка подключения кошелька:",r),alert(`Не удалось подключить кошелёк Backpack: ${r.message}`)}});window.addEventListener("load",()=>{var r,t;console.log("Окно загружено. Проверка наличия кошельков:"),console.log("window.solana:",window.solana),console.log("window.solana?.isBackpack:",(r=window.solana)==null?void 0:r.isBackpack),console.log("window.solana?.isPhantom:",(t=window.solana)==null?void 0:t.isPhantom),console.log("Все ключи solana/backpack:",Object.keys(window).filter(e=>e.toLowerCase().includes("solana")||e.toLowerCase().includes("backpack")))});
